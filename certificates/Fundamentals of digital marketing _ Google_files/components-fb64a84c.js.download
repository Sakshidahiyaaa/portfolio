import{P as I,s as ht,a as F,E as ft,t as pt,r as mt,b as vt,q as gt,d as Ve}from"./exceed-searchable-select-22a828d1.js";import{c as W,f as yt}from"./axios-ddfc3572.js";import{p as B}from"./initMarkdownEditor-711d5529.js";import{p as bt}from"./index-d3d1ad3e.js";import{a as _t,P as wt}from"./index-6a0e8549.js";import{c as oe}from"./centrifugo-8cb0b342.js";import{a as je}from"./index-fb7c5e9b.js";import"./_commonjsHelpers-de833af9.js";import"./jsx-runtime-38cf41f1.js";import"./index-d7bd9d42.js";import"./centrifuge-7916770f.js";class Et extends I{static get is(){return"exceed-plan-activity-form"}static get properties(){return{parentDialogId:{type:String,value:""},isFormValid:{type:Boolean,value:!1,observer:"toggleSubmitButton"},confirmHeading:{type:String,value:"Warning"},editFormId:{type:String,value:"edit-activity-form"},confirmId:{type:String,value:""},confirmMessageId:{type:String,value:"edit-activity-confirm-message"},selectedCourseIdId:{type:String,value:""},defaultValuesAttribute:{type:String,value:"data-plan-form-default"},autoCompleteSelector:{type:String,value:"exceed-searchable-select"},courseSelectionWarningId:{type:String,value:"add-to-course-to-plan-warning"},generalErrorMessage:{type:String,value:"Could not add activity to plan"},cancelMessageId:{type:String,value:"edit-activity-confirm-cancel"}}}toggleSubmitButton(e){let t=this._submitButtonEl||this.querySelector(`#${this.editFormId} button[type="submit"]`);e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")}toggleCourseSelectionWarning(e){let t;t||(t=this.querySelector(`#${this.courseSelectionWarningId}`)),t&&(this._selectedCourseIdEl.value||e?t.style.display="none":t.style.display="block")}monitorAutoComplete(){this._autoCompleteEl.addEventListener("searchableselect.input",()=>{this._selectedCourseIdEl.value=""}),this._autoCompleteInputEl.addEventListener("blur",()=>{setTimeout(()=>{this.toggleCourseSelectionWarning(),this.checkForValidForm()},500)})}checkForValidForm(){let e,t;this._selectedCourseIdEl&&!this._selectedCourseIdEl.value&&(t=!0),e=Array.from(this._requiredFieldEls).some(i=>i.getAttribute("type")!=="radio"?!i.value:!this._editFormEl.querySelectorAll(`input[name="${i.getAttribute("name")}"]:checked`).length),t||e?this.isFormValid=!1:this.isFormValid=!0}monitorRequiredFields(){this._requiredFieldEls.forEach(e=>{this.checkForValidForm();let t="keyup";e.getAttribute("type")==="radio"&&(t="click"),e.addEventListener(t,()=>{this.checkForValidForm()})})}submitForm(e){if(this._editFormEl.dataset.remote){let t=ht(this._editFormEl);W.post(e,t).then(()=>{location.reload()}).catch(i=>{i.response.data.status==="exists"?this.toggleConfirmMessage(i.response.data.confirm_message_html):window.Intellum&&Intellum.flashnotice&&Intellum.flashnotice.show(this.generalErrorMessage,"warning")})}else this._editFormEl.submit()}bindEditFormSubmitButton(){this._submitButtonEl.addEventListener("click",e=>{e.preventDefault(),this._submitButtonEl.hasAttribute("disabled")||(this.checkForValidForm(),this.isFormValid&&this.submitForm(this._editFormEl.getAttribute("action")))})}bindConfirmSubmitButton(){this._confirmButtonEl.addEventListener("click",e=>{e.preventDefault(),this.submitForm(this._confirmButtonEl.getAttribute("formaction"))})}bindCancelMessageButton(){this._cancelMessageEl.addEventListener("click",e=>{this.toggleConfirmMessage(!1)})}toggleConfirmMessage(e){if(!this._confirmEl)return;let t=this._confirmEl.querySelector(`#${this.confirmMessageId}`);e?(t.innerHTML=e,this._editFormEl.style.display="none",this._confirmEl.style.display="block"):(t.innerHTML="",this._editFormEl.style.display="block",this._confirmEl.style.display="none")}clearForm(){this.toggleConfirmMessage(!1),this.toggleCourseSelectionWarning(!0),this._editFormEl.querySelectorAll(`[${this.defaultValuesAttribute}]`).forEach(e=>{e.value=e.getAttribute(this.defaultValuesAttribute)})}bindActions(){this._autoCompleteEl&&this.monitorAutoComplete(),this.monitorRequiredFields(),this.bindEditFormSubmitButton(),this._confirmEl&&this.bindConfirmSubmitButton(),this._cancelMessageEl&&this.bindCancelMessageButton()}initElements(){this._editFormEl=this.querySelector(`#${this.editFormId}`),this._submitButtonEl=this._editFormEl.querySelector('button[type="submit"]'),this.confirmId&&(this._confirmEl=this.querySelector(`#${this.confirmId}`)),this._confirmEl&&(this._confirmButtonEl=this._confirmEl.querySelector('button[type="submit"]')),this._autoCompleteEl=this.querySelector(this.autoCompleteSelector),this._autoCompleteEl&&(this._autoCompleteInputEl=this._autoCompleteEl.querySelector("input")),this.selectedCourseIdId&&(this._selectedCourseIdEl=this.querySelector(`#${this.selectedCourseIdId}`)),this._requiredFieldEls=this.querySelectorAll("input[required]"),this.parentDialogId&&(this._dialogEl=document.getElementById(this.parentDialogId)),this._cancelMessageEl=this.querySelector(`#${this.cancelMessageId}`),this._editFormEl.querySelectorAll(`[${this.defaultValuesAttribute}]`).forEach(e=>{e.value=e.getAttribute(this.defaultValuesAttribute)})}init(){this.initElements(),this._dialogEl?this._dialogEl.addEventListener("show.dialog",()=>{this.clearForm(),this.bindActions()}):this.bindActions()}connectedCallback(){super.connectedCallback(),this.init()}}customElements.define("exceed-plan-activity-form",Et);class St extends I{static get is(){return"exceed-additional-plan-quarters"}static get properties(){return{lastQuarter:{type:String,value:""},lastQuarterAsDate:{type:Date,computed:"convertToDate(lastQuarter)"},additionalPlanClass:{type:String,value:"activitylistgroup--additional"},quarterSelector:{type:String,value:".activitylistgroup"}}}convertToDate(e){return bt(e)}showNext(){let e=_t(this.lastQuarterAsDate,3),t=yt(e,"YYYY-MM-DD"),i=this.querySelector(`${this.quarterSelector}[data-quarter='${t}']`);i&&i.classList.remove(this.additionalPlanClass),this.lastQuarter=t,this.numberOfAdditionalSections=this.numberOfAdditionalSections-1,this.numberOfAdditionalSections||this.buttonEl.parentNode.removeChild(this.buttonEl)}bindToSortableMove(){this._sortableBinding=F.subscribe(B.sortable,(e,t)=>{if((e==B.sortable_success||e==B.sortable_choose)&&t&&t.isKeyboardMove&&t.itemId&&t.toList&&t.toList.lastElementChild==document.getElementById(t.itemId)){let i=t.toList.closest(".activitylistgroup");i&&i.nextElementSibling&&(i.nextElementSibling==this||i.nextElementSibling.classList.contains("activitylistgroup--additional"))&&this.showNext()}})}connectedCallback(){super.connectedCallback(),this.numberOfAdditionalSections=this.querySelectorAll(this.quarterSelector).length,this.buttonEl.addEventListener("click",()=>{this.showNext()}),this.bindToSortableMove()}disconnectedCallback(){this._sortableBinding&&F.unsubscribe(this._sortableBinding)}constructor(){super(),this.buttonEl=this.querySelector("button")}}customElements.define("exceed-additional-plan-quarters",St);class kt extends I{static get is(){return"exceed-assessment-response-add-file"}static get properties(){return{questionId:{type:String,value:""},multipleUploaders:{type:String,value:"false"},createEndpoint:{type:String,value:""},uploadFileControlsSelector:{type:String,value:".uploadfile"},panelClass:{type:String,value:"pgcomponent--panel"},hiddenClass:{type:String,value:"a11y-atonly"},disabledButtonClass:{type:String,value:""},buttonId:{type:String,value:"assessment-response-submit"}}}replaceWithRenderedFile(e){let t=this.parentElement;this.classList.remove(this.panelClass),t.querySelector(".pgcomponent").innerHTML=e}monitorTranscodeProgress(e={}){typeof window[`media_asset_interval_${e.id}`]>"u"&&(window[`media_asset_interval_${e.id}`]=setInterval(function(){W.get(`/media_assets/${e.id}/transcode_state`).then(t=>{t.data.transcode_state=="finished"&&W.get(`/media_assets/${e.id}`).then(i=>{document.getElementById(`media_asset_${e.id}`).innerHTML=i.data,clearInterval(window[`media_asset_interval_${e.id}`])})})},1e4))}updateAssessmentQuestion(e){let t=document.querySelector(`[data-spa-question-id="${this.questionId}"]`).action,i=`media_asset_id_${this.questionId}`,r={};r[i]=e.id,W.post(t,r)}sendFileContent(e,t,i){if(this.createEndpoint=="")return!1;let r={media_file_upload:{file:e,name:t,content_type:i,generate_action_dispatch:!0}};W.post(this.createEndpoint,r).then(s=>{let a=JSON.parse(s.data.media_asset);this.multipleUploaders=="true"?this.updateAssessmentQuestion(a):(document.getElementById("media_asset_id").value=a.id,document.getElementById(this.buttonId).classList.remove(this.disabledButtonClass)),this.replaceWithRenderedFile(s.data.html),a.media_content_type.includes("video/")&&a.transcode_state!=="finished"&&this.monitorTranscodeProgress(a)})}handleUploadCompleteEvent(e){this.sendFileContent(e.detail.path,e.detail.fileName,e.detail.contentType)}setUploadControlInternals(){let e=`file_input_${this.id}`;this._fileUploaderEl.querySelector(".uploadfile__choosebtn").setAttribute("for",e),this._fileUploaderEl.querySelector(".uploadfile__input").id=e}initUploadControls(){this._fileUploaderEl&&window.jQuery&&!this._fileUploaderEl.dataset.intelluminitialized&&new window.Intellum.uploadFile($(this._fileUploaderEl))}init(){if(this._fileUploaderEl=this.querySelector(this.uploadFileControlsSelector),this._fileUploaderEl==null)return!1;this._fileUploaderEl.addEventListener("uploadfile.complete",this._boundHandleUploadCompleteEvent),this._fileUploaderEl.addEventListener("uploadfile.start",this._boundHandleUploadStartEvent),this._fileUploaderEl.addEventListener("uploadfile.cancel",this._boundHandleUploadCancelEvent)}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.disconnectedCallback(),this._fileUploaderEl.removeEventListener("uploadfile.complete",this._boundHandleUploadCompleteEvent),this._fileUploaderEl.removeEventListener("uploadfile.start",this._boundHandleUploadStartEvent),this._fileUploaderEl.removeEventListener("uploadfile.cancel",this._boundHandleUploadCancelEvent),F.unsubscribe(this._triggerEventsSubscription)}constructor(){super(),this._boundHandleUploadCompleteEvent=this.handleUploadCompleteEvent.bind(this)}}customElements.define("exceed-assessment-response-add-file",kt);class Ct extends I{static get is(){return"exceed-assessment-response-status-change-subscribe"}static get properties(){return{channel:{type:String}}}handleMessage(e){window.location.reload()}init(){this.centrifugo&&!this._subscription&&(this._subscription=this.centrifugo.subscribe(this.channel,this.handleMessage.bind(this)))}connectedCallback(){super.connectedCallback(),this.centrifugo=oe,this.init()}}customElements.define("exceed-assessment-response-status-change-subscribe",Ct);class Tt extends I{static get is(){return"exceed-calculator"}static get properties(){return{outputElSelector:{type:String,value:".calculator"}}}clear(){this._subRes.style.visibility="hidden",this._result.value="0",this._subRes.value="",this._calculations=[],this._newNumber=!1,this._reset=!1,this._lastOperator=null,this._currentResult=0}doMath(e=null,t=null,i=null){switch(i){case"plus":return e+t;case"minus":return e-t;case"multiply":return e*t;case"divide":return e/t}}returnOperator(e=null){switch(e){case"plus":return"+";case"minus":return"−";case"multiply":return"×";case"divide":return"÷";case"equal":return"="}}addNumber(e){this._reset&&this.clear(),this._number=e.target.textContent,this._result.value==="0"?this._result.value=this._number:this._newNumber?this._result.value=this._number:this._result.value+=this._number,this._newNumber=!1}addOption(e){this._option=e.target.dataset.option,this._lastChar=this._result.value[this._result.value.length-1],this._option==="dot"?this._lastChar==="."||this._result.value.indexOf(".")!==-1?this._result.value:this._result.value+=".":this._option==="clearEntry"?this._result.value="0":this._option==="clear"?this.clear():this._option==="reverse"?this._result.value=this._result.value*-1:this._option==="undo"&&(this._result.value.length===1?this._result.value="0":this._result.value=this._result.value.substring(0,this._result.value.length-1))}calculate(e){if(this._operator=e.target.dataset.operator,this._value=Number(this._result.value),this._subRes.style.visibility="visible",this._operator==="pow")this._subRes.value=` sqr(${this._result.value})`,this._result.value=Math.pow(this._result.value,2);else if(this._operator==="sqrt")this._subRes.value=` ${e.target.textContent}(${this._result.value})`,this._result.value=Math.sqrt(this._result.value);else if(this._operator==="fraction")this._subRes.value=` 1/(${this._result.value})`,this._result.value=1/this._result.value;else if(this._operator==="percent")this._result.value=parseFloat((this._currentResult*this._value/100).toPrecision(14));else if(this._operator==="equal"&&this._newNumber&&this._lastOperator!==null&&this._lastOperator!=="equal")this._calculations.length>2&&(this._value=this._calculations.map(t=>t).reverse().find(t=>typeof t=="number")),this._calculations=[this._currentResult,this.returnOperator(this._lastOperator),this._value,this.returnOperator(this._operator)],this._currentResult=this.doMath(this._currentResult,this._value,this._lastOperator),this._currentResult=parseFloat(this._currentResult.toPrecision(14)),this._result.value=this._currentResult,this._subRes.value=this._calculations.join(" ");else{if(this._newNumber){this._lastOperator=this._operator,this._calculations[this._calculations.length-1]=this.returnOperator(this._operator),this._subRes.value=this._calculations.join(" "),this._reset=!1;return}this._lastOperator===null?this._currentResult=this._value:this._currentResult=this.doMath(this._currentResult,this._value,this._lastOperator),this._operator!=="equal"?this._lastOperator=this._operator:this._reset=!0,this._newNumber=!0,this._calculations.push(this._value),this._calculations.push(this.returnOperator(this._operator)),this._currentResult=parseFloat(this._currentResult.toPrecision(14)),this._result.value=this._currentResult,this._subRes.value=this._calculations.join(" ")}}bindTriggers(){this._boundAddNumberHandler=this.addNumber.bind(this),this._boundAddOptionHandler=this.addOption.bind(this),this._boundCalculateHandler=this.calculate.bind(this),this._numbers.forEach(e=>e.addEventListener("click",this._boundAddNumberHandler)),this._options.forEach(e=>e.addEventListener("click",this._boundAddOptionHandler)),this._operators.forEach(e=>e.addEventListener("click",this._boundCalculateHandler))}unbindAllEvents(){this._numbers.forEach(e=>e.removeEventListener("click",this.addNumber)),this._options.forEach(e=>e.removeEventListener("click",this.addOption)),this._operators.forEach(e=>e.removeEventListener("click",this.calculate))}init(){this._outputEl=this.querySelector(this.outputElSelector),this._result=this.querySelector(".calculator__result-primary"),this._subRes=this.querySelector(".calculator__result-secondary"),this._numbers=[...this.querySelectorAll("[data-number]")],this._options=[...this.querySelectorAll("[data-option]")],this._operators=[...this.querySelectorAll("[data-operator]")],this._calculations=[],this._newNumber=!1,this._reset=!1,this._lastOperator=null,this._currentResult=0,this.clear(),this._outputEl&&this.bindTriggers()}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.disconnectedCallback(),this.unbindAllEvents()}}customElements.define("exceed-calculator",Tt);class Pt extends I{static get is(){return"exceed-centrifugo-connection-test"}static get properties(){return{}}init(){this.centrifugo&&this.centrifugo.connect()}connectedCallback(){super.connectedCallback(),this.centrifugo=oe,this.init()}}customElements.define("exceed-centrifugo-connection-test",Pt);/*!
 * Glide.js v3.4.1
 * (c) 2013-2019 Jędrzej Chałubek <jedrzej.chalubek@gmail.com> (http://jedrzejchalubek.com/)
 * Released under the MIT License.
 */var xt={type:"slider",startAt:0,perView:1,focusAt:0,gap:10,autoplay:!1,hoverpause:!0,keyboard:!0,bound:!1,swipeThreshold:80,dragThreshold:120,perTouch:!1,touchRatio:.5,touchAngle:45,animationDuration:400,rewind:!0,rewindDuration:800,animationTimingFunc:"cubic-bezier(.165, .840, .440, 1)",throttle:10,direction:"ltr",peek:0,breakpoints:{},classes:{direction:{ltr:"glide--ltr",rtl:"glide--rtl"},slider:"glide--slider",carousel:"glide--carousel",swipeable:"glide--swipeable",dragging:"glide--dragging",cloneSlide:"glide__slide--clone",activeNav:"glide__bullet--active",activeSlide:"glide__slide--active",disabledArrow:"glide__arrow--disabled"}};function z(n){console.error("[Glide warn]: "+n)}var Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ge=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},ye=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),ne=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},It=function n(e,t,i){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:n(s,t,i)}else{if("value"in r)return r.value;var a=r.get;return a===void 0?void 0:a.call(i)}},Mt=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},Ot=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n};function A(n){return parseInt(n)}function At(n){return parseFloat(n)}function Ee(n){return typeof n=="string"}function re(n){var e=typeof n>"u"?"undefined":Lt(n);return e==="function"||e==="object"&&!!n}function Nt(n){return typeof n=="number"}function pe(n){return typeof n=="function"}function $e(n){return typeof n>"u"}function Se(n){return n.constructor===Array}function Ht(n,e,t){var i={};for(var r in e)pe(e[r])?i[r]=e[r](n,i,t):z("Extension must be a function");for(var s in i)pe(i[s].mount)&&i[s].mount();return i}function O(n,e,t){Object.defineProperty(n,e,t)}function xe(n,e){var t=ne({},n,e);return e.hasOwnProperty("classes")&&(t.classes=ne({},n.classes,e.classes),e.classes.hasOwnProperty("direction")&&(t.classes.direction=ne({},n.classes.direction,e.classes.direction))),e.hasOwnProperty("breakpoints")&&(t.breakpoints=ne({},n.breakpoints,e.breakpoints)),t}var Bt=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(this,n),this.events=e,this.hop=e.hasOwnProperty}return ye(n,[{key:"on",value:function(t,i){if(Se(t))for(var r=0;r<t.length;r++)this.on(t[r],i);this.hop.call(this.events,t)||(this.events[t]=[]);var s=this.events[t].push(i)-1;return{remove:function(){delete this.events[t][s]}}}},{key:"emit",value:function(t,i){if(Se(t))for(var r=0;r<t.length;r++)this.emit(t[r],i);this.hop.call(this.events,t)&&this.events[t].forEach(function(s){s(i||{})})}}]),n}(),qt=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ge(this,n),this._c={},this._t=[],this._e=new Bt,this.disabled=!1,this.selector=e,this.settings=xe(xt,t),this.index=this.settings.startAt}return ye(n,[{key:"mount",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._e.emit("mount.before"),re(t)?this._c=Ht(this,t,this._e):z("You need to provide a object on `mount()`"),this._e.emit("mount.after"),this}},{key:"mutate",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Se(t)?this._t=t:z("You need to provide a array on `mutate()`"),this}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.settings=xe(this.settings,t),t.hasOwnProperty("startAt")&&(this.index=t.startAt),this._e.emit("update"),this}},{key:"go",value:function(t){return this._c.Run.make(t),this}},{key:"move",value:function(t){return this._c.Transition.disable(),this._c.Move.make(t),this}},{key:"destroy",value:function(){return this._e.emit("destroy"),this}},{key:"play",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return t&&(this.settings.autoplay=t),this._e.emit("play"),this}},{key:"pause",value:function(){return this._e.emit("pause"),this}},{key:"disable",value:function(){return this.disabled=!0,this}},{key:"enable",value:function(){return this.disabled=!1,this}},{key:"on",value:function(t,i){return this._e.on(t,i),this}},{key:"isType",value:function(t){return this.settings.type===t}},{key:"settings",get:function(){return this._o},set:function(t){re(t)?this._o=t:z("Options must be an `object` instance.")}},{key:"index",get:function(){return this._i},set:function(t){this._i=A(t)}},{key:"type",get:function(){return this.settings.type}},{key:"disabled",get:function(){return this._d},set:function(t){this._d=!!t}}]),n}();function Ft(n,e,t){var i={mount:function(){this._o=!1},make:function(s){var a=this;n.disabled||(n.disable(),this.move=s,t.emit("run.before",this.move),this.calculate(),t.emit("run",this.move),e.Transition.after(function(){a.isStart()&&t.emit("run.start",a.move),a.isEnd()&&t.emit("run.end",a.move),(a.isOffset("<")||a.isOffset(">"))&&(a._o=!1,t.emit("run.offset",a.move)),t.emit("run.after",a.move),n.enable()}))},calculate:function(){var s=this.move,a=this.length,o=s.steps,u=s.direction,l=Nt(A(o))&&A(o)!==0;switch(u){case">":o===">"?n.index=a:this.isEnd()?n.isType("slider")&&!n.settings.rewind||(this._o=!0,n.index=0):l?n.index+=Math.min(a-n.index,-A(o)):n.index++;break;case"<":o==="<"?n.index=0:this.isStart()?n.isType("slider")&&!n.settings.rewind||(this._o=!0,n.index=a):l?n.index-=Math.min(n.index,A(o)):n.index--;break;case"=":n.index=o;break;default:z("Invalid direction pattern ["+u+o+"] has been used");break}},isStart:function(){return n.index===0},isEnd:function(){return n.index===this.length},isOffset:function(s){return this._o&&this.move.direction===s}};return O(i,"move",{get:function(){return this._m},set:function(s){var a=s.substr(1);this._m={direction:s.substr(0,1),steps:a?A(a)?A(a):a:0}}}),O(i,"length",{get:function(){var s=n.settings,a=e.Html.slides.length;return n.isType("slider")&&s.focusAt!=="center"&&s.bound?a-1-(A(s.perView)-1)+A(s.focusAt):a-1}}),O(i,"offset",{get:function(){return this._o}}),i}function Le(){return new Date().getTime()}function Ce(n,e,t){var i=void 0,r=void 0,s=void 0,a=void 0,o=0;t||(t={});var u=function(){o=t.leading===!1?0:Le(),i=null,a=n.apply(r,s),i||(r=s=null)},l=function(){var d=Le();!o&&t.leading===!1&&(o=d);var f=e-(d-o);return r=this,s=arguments,f<=0||f>e?(i&&(clearTimeout(i),i=null),o=d,a=n.apply(r,s),i||(r=s=null)):!i&&t.trailing!==!1&&(i=setTimeout(u,f)),a};return l.cancel=function(){clearTimeout(i),o=0,i=r=s=null},l}var ue={ltr:["marginLeft","marginRight"],rtl:["marginRight","marginLeft"]};function Rt(n,e,t){var i={apply:function(s){for(var a=0,o=s.length;a<o;a++){var u=s[a].style,l=e.Direction.value;a!==0?u[ue[l][0]]=this.value/2+"px":u[ue[l][0]]="",a!==s.length-1?u[ue[l][1]]=this.value/2+"px":u[ue[l][1]]=""}},remove:function(s){for(var a=0,o=s.length;a<o;a++){var u=s[a].style;u.marginLeft="",u.marginRight=""}}};return O(i,"value",{get:function(){return A(n.settings.gap)}}),O(i,"grow",{get:function(){return i.value*(e.Sizes.length-1)}}),O(i,"reductor",{get:function(){var s=n.settings.perView;return i.value*(s-1)/s}}),t.on(["build.after","update"],Ce(function(){i.apply(e.Html.wrapper.children)},30)),t.on("destroy",function(){i.remove(e.Html.wrapper.children)}),i}function We(n){if(n&&n.parentNode){for(var e=n.parentNode.firstChild,t=[];e;e=e.nextSibling)e.nodeType===1&&e!==n&&t.push(e);return t}return[]}function Ie(n){return!!(n&&n instanceof window.HTMLElement)}var Me='[data-glide-el="track"]';function Dt(n,e){var t={mount:function(){this.root=n.selector,this.track=this.root.querySelector(Me),this.slides=Array.prototype.slice.call(this.wrapper.children).filter(function(r){return!r.classList.contains(n.settings.classes.cloneSlide)})}};return O(t,"root",{get:function(){return t._r},set:function(r){Ee(r)&&(r=document.querySelector(r)),Ie(r)?t._r=r:z("Root element must be a existing Html node")}}),O(t,"track",{get:function(){return t._t},set:function(r){Ie(r)?t._t=r:z("Could not find track element. Please use "+Me+" attribute.")}}),O(t,"wrapper",{get:function(){return t.track.children[0]}}),t}function Ut(n,e,t){var i={mount:function(){this.value=n.settings.peek}};return O(i,"value",{get:function(){return i._v},set:function(s){re(s)?(s.before=A(s.before),s.after=A(s.after)):s=A(s),i._v=s}}),O(i,"reductor",{get:function(){var s=i.value,a=n.settings.perView;return re(s)?s.before/a+s.after/a:s*2/a}}),t.on(["resize","update"],function(){i.mount()}),i}function Vt(n,e,t){var i={mount:function(){this._o=0},make:function(){var s=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.offset=a,t.emit("move",{movement:this.value}),e.Transition.after(function(){t.emit("move.after",{movement:s.value})})}};return O(i,"offset",{get:function(){return i._o},set:function(s){i._o=$e(s)?0:A(s)}}),O(i,"translate",{get:function(){return e.Sizes.slideWidth*n.index}}),O(i,"value",{get:function(){var s=this.offset,a=this.translate;return e.Direction.is("rtl")?a+s:a-s}}),t.on(["build.before","run"],function(){i.make()}),i}function jt(n,e,t){var i={setupSlides:function(){for(var s=this.slideWidth+"px",a=e.Html.slides,o=0;o<a.length;o++)a[o].style.width=s},setupWrapper:function(s){e.Html.wrapper.style.width=this.wrapperSize+"px"},remove:function(){for(var s=e.Html.slides,a=0;a<s.length;a++)s[a].style.width="";e.Html.wrapper.style.width=""}};return O(i,"length",{get:function(){return e.Html.slides.length}}),O(i,"width",{get:function(){return e.Html.root.offsetWidth}}),O(i,"wrapperSize",{get:function(){return i.slideWidth*i.length+e.Gaps.grow+e.Clones.grow}}),O(i,"slideWidth",{get:function(){return i.width/n.settings.perView-e.Peek.reductor-e.Gaps.reductor}}),t.on(["build.before","resize","update"],function(){i.setupSlides(),i.setupWrapper()}),t.on("destroy",function(){i.remove()}),i}function $t(n,e,t){var i={mount:function(){t.emit("build.before"),this.typeClass(),this.activeClass(),t.emit("build.after")},typeClass:function(){e.Html.root.classList.add(n.settings.classes[n.settings.type])},activeClass:function(){var s=n.settings.classes,a=e.Html.slides[n.index];a&&(a.classList.add(s.activeSlide),We(a).forEach(function(o){o.classList.remove(s.activeSlide)}))},removeClasses:function(){var s=n.settings.classes;e.Html.root.classList.remove(s[n.settings.type]),e.Html.slides.forEach(function(a){a.classList.remove(s.activeSlide)})}};return t.on(["destroy","update"],function(){i.removeClasses()}),t.on(["resize","update"],function(){i.mount()}),t.on("move.after",function(){i.activeClass()}),i}function Wt(n,e,t){var i={mount:function(){this.items=[],n.isType("carousel")&&(this.items=this.collect())},collect:function(){for(var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=e.Html.slides,o=n.settings,u=o.perView,l=o.classes,m=+!!n.settings.peek,d=u+m,f=a.slice(0,d),_=a.slice(-d),b=0;b<Math.max(1,Math.floor(u/a.length));b++){for(var T=0;T<f.length;T++){var L=f[T].cloneNode(!0);L.classList.add(l.cloneSlide),s.push(L)}for(var P=0;P<_.length;P++){var y=_[P].cloneNode(!0);y.classList.add(l.cloneSlide),s.unshift(y)}}return s},append:function(){for(var s=this.items,a=e.Html,o=a.wrapper,u=a.slides,l=Math.floor(s.length/2),m=s.slice(0,l).reverse(),d=s.slice(l,s.length),f=e.Sizes.slideWidth+"px",_=0;_<d.length;_++)o.appendChild(d[_]);for(var b=0;b<m.length;b++)o.insertBefore(m[b],u[0]);for(var T=0;T<s.length;T++)s[T].style.width=f},remove:function(){for(var s=this.items,a=0;a<s.length;a++)e.Html.wrapper.removeChild(s[a])}};return O(i,"grow",{get:function(){return(e.Sizes.slideWidth+e.Gaps.value)*i.items.length}}),t.on("update",function(){i.remove(),i.mount(),i.append()}),t.on("build.before",function(){n.isType("carousel")&&i.append()}),t.on("destroy",function(){i.remove()}),i}var le=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(this,n),this.listeners=e}return ye(n,[{key:"on",value:function(t,i,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;Ee(t)&&(t=[t]);for(var a=0;a<t.length;a++)this.listeners[t[a]]=r,i.addEventListener(t[a],this.listeners[t[a]],s)}},{key:"off",value:function(t,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;Ee(t)&&(t=[t]);for(var s=0;s<t.length;s++)i.removeEventListener(t[s],this.listeners[t[s]],r)}},{key:"destroy",value:function(){delete this.listeners}}]),n}();function zt(n,e,t){var i=new le,r={mount:function(){this.bind()},bind:function(){i.on("resize",window,Ce(function(){t.emit("resize")},n.settings.throttle))},unbind:function(){i.off("resize",window)}};return t.on("destroy",function(){r.unbind(),i.destroy()}),r}var Yt=["ltr","rtl"],Qt={">":"<","<":">","=":"="};function Kt(n,e,t){var i={mount:function(){this.value=n.settings.direction},resolve:function(s){var a=s.slice(0,1);return this.is("rtl")?s.split(a).join(Qt[a]):s},is:function(s){return this.value===s},addClass:function(){e.Html.root.classList.add(n.settings.classes.direction[this.value])},removeClass:function(){e.Html.root.classList.remove(n.settings.classes.direction[this.value])}};return O(i,"value",{get:function(){return i._v},set:function(s){Yt.indexOf(s)>-1?i._v=s:z("Direction value must be `ltr` or `rtl`")}}),t.on(["destroy","update"],function(){i.removeClass()}),t.on("update",function(){i.mount()}),t.on(["build.before","update"],function(){i.addClass()}),i}function Xt(n,e){return{modify:function(i){return e.Direction.is("rtl")?-i:i}}}function Jt(n,e){return{modify:function(i){return i+e.Gaps.value*n.index}}}function Zt(n,e){return{modify:function(i){return i+e.Clones.grow/2}}}function Gt(n,e){return{modify:function(i){if(n.settings.focusAt>=0){var r=e.Peek.value;return re(r)?i-r.before:i-r}return i}}}function ei(n,e){return{modify:function(i){var r=e.Gaps.value,s=e.Sizes.width,a=n.settings.focusAt,o=e.Sizes.slideWidth;return a==="center"?i-(s/2-o/2):i-o*a-r*a}}}function ti(n,e,t){var i=[Jt,Zt,Gt,ei].concat(n._t,[Xt]);return{mutate:function(s){for(var a=0;a<i.length;a++){var o=i[a];pe(o)&&pe(o().modify)?s=o(n,e,t).modify(s):z("Transformer should be a function that returns an object with `modify()` method")}return s}}}function ii(n,e,t){var i={set:function(s){var a=ti(n,e).mutate(s);e.Html.wrapper.style.transform="translate3d("+-1*a+"px, 0px, 0px)"},remove:function(){e.Html.wrapper.style.transform=""}};return t.on("move",function(r){var s=e.Gaps.value,a=e.Sizes.length,o=e.Sizes.slideWidth;return n.isType("carousel")&&e.Run.isOffset("<")?(e.Transition.after(function(){t.emit("translate.jump"),i.set(o*(a-1))}),i.set(-o-s*a)):n.isType("carousel")&&e.Run.isOffset(">")?(e.Transition.after(function(){t.emit("translate.jump"),i.set(0)}),i.set(o*a+s*a)):i.set(r.movement)}),t.on("destroy",function(){i.remove()}),i}function ni(n,e,t){var i=!1,r={compose:function(a){var o=n.settings;return i?a+" 0ms "+o.animationTimingFunc:a+" "+this.duration+"ms "+o.animationTimingFunc},set:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";e.Html.wrapper.style.transition=this.compose(a)},remove:function(){e.Html.wrapper.style.transition=""},after:function(a){setTimeout(function(){a()},this.duration)},enable:function(){i=!1,this.set()},disable:function(){i=!0,this.set()}};return O(r,"duration",{get:function(){var a=n.settings;return n.isType("slider")&&e.Run.offset?a.rewindDuration:a.animationDuration}}),t.on("move",function(){r.set()}),t.on(["build.before","resize","translate.jump"],function(){r.disable()}),t.on("run",function(){r.enable()}),t.on("destroy",function(){r.remove()}),r}var ze=!1;try{var Oe=Object.defineProperty({},"passive",{get:function(){ze=!0}});window.addEventListener("testPassive",null,Oe),window.removeEventListener("testPassive",null,Oe)}catch{}var Ye=ze,ce=["touchstart","mousedown"],Ae=["touchmove","mousemove"],Ne=["touchend","touchcancel","mouseup","mouseleave"],He=["mousedown","mousemove","mouseup","mouseleave"];function ri(n,e,t){var i=new le,r=0,s=0,a=0,o=!1,u=Ye?{passive:!0}:!1,l={mount:function(){this.bindSwipeStart()},start:function(d){if(!o&&!n.disabled){this.disable();var f=this.touches(d);r=null,s=A(f.pageX),a=A(f.pageY),this.bindSwipeMove(),this.bindSwipeEnd(),t.emit("swipe.start")}},move:function(d){if(!n.disabled){var f=n.settings,_=f.touchAngle,b=f.touchRatio,T=f.classes,L=this.touches(d),P=A(L.pageX)-s,y=A(L.pageY)-a,v=Math.abs(P<<2),g=Math.abs(y<<2),E=Math.sqrt(v+g),k=Math.sqrt(g);if(r=Math.asin(k/E),r*180/Math.PI<_)d.stopPropagation(),e.Move.make(P*At(b)),e.Html.root.classList.add(T.dragging),t.emit("swipe.move");else return!1}},end:function(d){if(!n.disabled){var f=n.settings,_=this.touches(d),b=this.threshold(d),T=_.pageX-s,L=r*180/Math.PI,P=Math.round(T/e.Sizes.slideWidth);this.enable(),T>b&&L<f.touchAngle?(f.perTouch&&(P=Math.min(P,A(f.perTouch))),e.Direction.is("rtl")&&(P=-P),e.Run.make(e.Direction.resolve("<"+P))):T<-b&&L<f.touchAngle?(f.perTouch&&(P=Math.max(P,-A(f.perTouch))),e.Direction.is("rtl")&&(P=-P),e.Run.make(e.Direction.resolve(">"+P))):e.Move.make(),e.Html.root.classList.remove(f.classes.dragging),this.unbindSwipeMove(),this.unbindSwipeEnd(),t.emit("swipe.end")}},bindSwipeStart:function(){var d=this,f=n.settings;f.swipeThreshold&&i.on(ce[0],e.Html.wrapper,function(_){d.start(_)},u),f.dragThreshold&&i.on(ce[1],e.Html.wrapper,function(_){d.start(_)},u)},unbindSwipeStart:function(){i.off(ce[0],e.Html.wrapper,u),i.off(ce[1],e.Html.wrapper,u)},bindSwipeMove:function(){var d=this;i.on(Ae,e.Html.wrapper,Ce(function(f){d.move(f)},n.settings.throttle),u)},unbindSwipeMove:function(){i.off(Ae,e.Html.wrapper,u)},bindSwipeEnd:function(){var d=this;i.on(Ne,e.Html.wrapper,function(f){d.end(f)})},unbindSwipeEnd:function(){i.off(Ne,e.Html.wrapper)},touches:function(d){return He.indexOf(d.type)>-1?d:d.touches[0]||d.changedTouches[0]},threshold:function(d){var f=n.settings;return He.indexOf(d.type)>-1?f.dragThreshold:f.swipeThreshold},enable:function(){return o=!1,e.Transition.enable(),this},disable:function(){return o=!0,e.Transition.disable(),this}};return t.on("build.after",function(){e.Html.root.classList.add(n.settings.classes.swipeable)}),t.on("destroy",function(){l.unbindSwipeStart(),l.unbindSwipeMove(),l.unbindSwipeEnd(),i.destroy()}),l}var si='[data-glide-el="controls[nav]"]',ai='[data-glide-el^="controls"]';function oi(n,e,t){var i=new le,r=Ye?{passive:!0}:!1,s={mount:function(){this._n=e.Html.root.querySelectorAll(si),this._c=e.Html.root.querySelectorAll(ai),this.addBindings()},setActive:function(){for(var o=0;o<this._n.length;o++)this.addClass(this._n[o].children)},removeActive:function(){for(var o=0;o<this._n.length;o++)this.removeClass(this._n[o].children)},addClass:function(o){var u=n.settings,l=o[n.index];l&&(l.classList.add(u.classes.activeNav),We(l).forEach(function(m){m.classList.remove(u.classes.activeNav)}))},removeClass:function(o){var u=o[n.index];u&&u.classList.remove(n.settings.classes.activeNav)},addBindings:function(){for(var o=0;o<this._c.length;o++)this.bind(this._c[o].children)},removeBindings:function(){for(var o=0;o<this._c.length;o++)this.unbind(this._c[o].children)},bind:function(o){for(var u=0;u<o.length;u++)i.on("click",o[u],this.click),i.on("touchstart",o[u],this.click,r)},unbind:function(o){for(var u=0;u<o.length;u++)i.off(["click","touchstart"],o[u])},click:function(o){o.preventDefault(),e.Run.make(e.Direction.resolve(o.currentTarget.getAttribute("data-glide-dir")))}};return O(s,"items",{get:function(){return s._c}}),t.on(["mount.after","move.after"],function(){s.setActive()}),t.on("destroy",function(){s.removeBindings(),s.removeActive(),i.destroy()}),s}function li(n,e,t){var i=new le,r={mount:function(){n.settings.keyboard&&this.bind()},bind:function(){i.on("keyup",document,this.press)},unbind:function(){i.off("keyup",document)},press:function(a){a.keyCode===39&&e.Run.make(e.Direction.resolve(">")),a.keyCode===37&&e.Run.make(e.Direction.resolve("<"))}};return t.on(["destroy","update"],function(){r.unbind()}),t.on("update",function(){r.mount()}),t.on("destroy",function(){i.destroy()}),r}function ui(n,e,t){var i=new le,r={mount:function(){this.start(),n.settings.hoverpause&&this.bind()},start:function(){var a=this;n.settings.autoplay&&$e(this._i)&&(this._i=setInterval(function(){a.stop(),e.Run.make(">"),a.start()},this.time))},stop:function(){this._i=clearInterval(this._i)},bind:function(){var a=this;i.on("mouseover",e.Html.root,function(){a.stop()}),i.on("mouseout",e.Html.root,function(){a.start()})},unbind:function(){i.off(["mouseover","mouseout"],e.Html.root)}};return O(r,"time",{get:function(){var a=e.Html.slides[n.index].getAttribute("data-glide-autoplay");return A(a||n.settings.autoplay)}}),t.on(["destroy","update"],function(){r.unbind()}),t.on(["run.before","pause","destroy","swipe.start","update"],function(){r.stop()}),t.on(["run.after","play","swipe.end"],function(){r.start()}),t.on("update",function(){r.mount()}),t.on("destroy",function(){i.destroy()}),r}var ci={Html:Dt,Translate:ii,Transition:ni,Direction:Kt,Peek:Ut,Sizes:jt,Gaps:Rt,Move:Vt,Clones:Wt,Resize:zt,Build:$t,Run:Ft},di=function(n){Mt(e,n);function e(){return ge(this,e),Ot(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ye(e,[{key:"mount",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return It(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mount",this).call(this,ne({},ci,i))}}]),e}(qt);let Qe='"Item {{POSITION}} of {{TOTAL ITEMS}}"';window.Intellum&&window.Intellum.i18nStrings&&(Qe=window.Intellum.i18nStrings.showing_item_position_of_total);class hi extends I{static get is(){return"exceed-carousel"}static get properties(){return{dir:{type:String,value:""},autoplayInterval:{type:Number,value:0},gapWidth:{type:Number,value:0},sliverWidth:{type:Number,value:0},animationDuration:{type:Number,value:500},ariaCurrentMessage:{type:String,value:Qe},a11yAnnouncementDivId:{type:String,value:"carousel-announcements"}}}hideClones(){this.querySelectorAll(".carousel__listitem--clone").forEach(e=>{e.setAttribute("aria-hidden","true")})}handleItemChange(){let e=this._itemsList.querySelector(".carousel__listitem--active");e==null||e.removeAttribute("aria-hidden"),this._navItems&&this._isNavigationUsed&&(this._navItems.forEach(t=>{t.removeAttribute("tabindex")}),e.setAttribute("tabindex","-1"),this._isNavigationKeyUsed&&e.focus(),this._isNavigationUsed=!1,this._isNavigationKeyUsed=!1)}handleNavButtonChange(){this._navButtons.forEach(t=>{t.removeAttribute("aria-current")});let e=this._navButtonList.querySelector(".carousel__navitem--active");e==null||e.setAttribute("aria-current","location")}setAutoplayOption(){return this.autoplayInterval==0?!1:this.autoplayInterval}handleCarouselMounted(){this._items&&this._items.forEach(e=>{e.setAttribute("aria-hidden","true")}),this.removeAttribute("aria-hidden"),this.hideClones(),this.querySelector(".carousel__arrows").classList.add("carousel__arrows--visible"),this.querySelector(".carousel__nav").classList.add("carousel__nav--visible")}handleCarouselBeginMove(){let e=this.querySelector(".carousel__listitem--active");e&&e.setAttribute("aria-hidden","true")}handleCarouselMoved(){this._announcementDiv&&(this._announcementDiv.innerText=this.ariaCurrentMessage.replace("{{POSITION}}",this._glide.index+1).replace("{{TOTAL ITEMS}}",this.querySelector(".carousel__list").children.length-2)),this.hideClones()}handleNavigationClick(){this._isNavigationUsed=!0}handleNavigationKey(e){this.contains(document.activeElement)&&(e.code==="ArrowLeft"||e.code=="ArrowRight"||e.code==="Enter"&&this._navItems.includes(document.activeElement.closest("li")))&&(this._isNavigationUsed=!0,this._isNavigationKeyUsed=!0)}handlePausePlayButton(){this.autoplayInterval>0&&this._pausePlayButton&&(this._isAutoplayPaused?(this._glide._c.Autoplay.bind(),this._glide._c.Autoplay.start()):(this._glide._c.Autoplay.unbind(),this._glide._c.Autoplay.stop()),this._pausePlayButton.querySelectorAll(".carousel__pauseplaycontent").forEach(e=>{e.classList.contains("carousel__pauseplaycontent--active")?e.classList.remove("carousel__pauseplaycontent--active"):e.classList.add("carousel__pauseplaycontent--active")}),this._isAutoplayPaused=!this._isAutoplayPaused)}bindEventHandlers(){this._boundNavigationClickHandler=this.handleNavigationClick.bind(this),this._boundNavigationKeyHandler=this.handleNavigationKey.bind(this),this._boundItemChangeHandler=this.handleItemChange.bind(this),this._boundNavButtonChangeHandler=this.handleNavButtonChange.bind(this),this._boundPausePlayButtonHandler=this.handlePausePlayButton.bind(this),this._navItems&&this._navItems.forEach(e=>{e.addEventListener("click",this._boundNavigationClickHandler)}),document.addEventListener("keyup",this._boundNavigationKeyHandler),this._pausePlayButton=this.querySelector(".carousel__pauseplay"),this._pausePlayButton&&this.autoplayInterval>0&&this._pausePlayButton.addEventListener("click",this._boundPausePlayButtonHandler),this._itemChangeObserver=new MutationObserver(this._boundItemChangeHandler),this._itemChangeObserver.observe(this._itemsList,{attributeFilter:["class"],subtree:!0}),this._navButtons&&(this._navButtonChangeObserver=new MutationObserver(this._boundNavButtonChangeHandler),this._navButtonChangeObserver.observe(this._navButtonList,{attributeFilter:["class"],subtree:!0}))}unbindEventHandlers(){this._navItems&&this._navItems.forEach(e=>{e.removeEventListener("click",this._boundNavigationClickHandler)}),document.removeEventListener("keyup",this._boundNavigationKeyHandler),this._pausePlayButton&&this.autoplayInterval>0&&this._pausePlayButton.removeEventListener("click",this._boundPausePlayButtonHandler),this._itemChangeObserver.disconnect(),this._navButtons&&this._navButtonChangeObserver.disconnect()}init(){if(this._itemsList=this.querySelector(".carousel__list"),this._items=this._itemsList.children,this._items)this._items=Array.prototype.slice.call(this._items);else return;let e=Array.prototype.slice.call(this.querySelector(".carousel__arrows").children);this._navButtonList=this.querySelector(".carousel__nav"),this._navButtons=Array.prototype.slice.call(this._navButtonList.children),this._navItems=e.concat(this._navButtons),this._announcementDiv=document.getElementById(this.a11yAnnouncementDivId),this._isNavigationUsed=!1,this._isNavigationKeyUsed=!1,this._isAutoplayPaused=!1,this._glide=new di(".carousel",{type:"carousel",focusAt:"center",autoplay:this.setAutoplayOption(),gap:this.gapWidth,peek:this.sliverWidth,animationDuration:this.animationDuration,classes:{direction:{ltr:"carousel--ltr",rtl:"carousel--rtl"},cloneSlide:"carousel__listitem--clone",activeSlide:"carousel__listitem--active",activeNav:"carousel__navitem--active",disabledArrow:"carousel__arrow--disabled"}}),this.dir=="rtl"&&this._glide.update({direction:"rtl"}),this._boundCarouselMountedHandler=this.handleCarouselMounted.bind(this),this._boundCarouselBeginMoveHandler=this.handleCarouselBeginMove.bind(this),this._boundCarouselMovedHandler=this.handleCarouselMoved.bind(this),this._glide.on("mount.after",this._boundCarouselMountedHandler),this._glide.on("move",this._boundCarouselBeginMoveHandler),this._glide.on("move.after",this._boundCarouselMovedHandler),this._glide.mount({Autoplay:ui,Controls:oi,Keyboard:li,Swipe:ri})}connectedCallback(){super.connectedCallback(),this.init(),this.bindEventHandlers()}disconnectedCallback(){super.disconnectedCallback(),this.unbindEventHandlers()}}customElements.define("exceed-carousel",hi);class fi extends ft{static get properties(){return{openClass:{type:String,value:"continuemodal--open"},visibleClass:{type:String,value:"continuemodal--visible"},countdownElSelector:{type:String,value:".continuecard__timer"},nextItemUrl:{type:String,value:""},triggerElSelector:{type:String,value:'[data-action="replay"]'}}}static get is(){return"exceed-continue-modal"}doModalOpen(){this._modalTriggerEl??document.activeElement,this.classList.add(this.openClass),this.offsetWidth,this.classList.add(this.visibleClass),setTimeout(()=>{window.Intellum&&window.Intellum.truncate!==void 0&&window.Intellum.truncate.init({scope:this})},this.transitionTime),this.isOpen=!0,this._modalTriggerEl&&this._modalTriggerEl.focus(),this._boundTabKeydownHandler=pt(this).boundTabKeydownHandler,document.addEventListener("keydown",this._boundEscKeydownHandler),this.runTimer()}doModalClose(){this.isOpen&&(this.resetTimer(),this.classList.remove(this.visibleClass),setTimeout(()=>{this.classList.remove(this.openClass)},this.transitionTime),this.isOpen=!1,mt(this._modalTriggerEl,this._boundTabKeydownHandler),document.removeEventListener("keydown",this._boundEscKeydownHandler))}closeModal(){this.doModalClose()}listenToEventBus(){this._modalEventSubscriber=F.subscribe(B.modal,(e,t)=>{this.isEventForThisDialog(t)&&(e===B.modal_open?this.openModal():e===B.modal_close&&this.closeModal())})}initFormListener(){}handleHistoryEvents(){}setTimer(){if(this._countdownEl=this.querySelector(this.countdownElSelector),this._countdownEl){let e=this._countdownEl.innerText;isNaN(e)||(this._countdownNumber=Number(e))}}runTimer(){if(this._countdownEl&&this._countdownNumber){let e=this._countdownNumber;this._timer=setInterval(()=>{e--,this._countdownEl.innerText=e,e==0&&(clearInterval(this._timer),window.location.href=this.nextItemUrl)},1e3)}}resetTimer(){this._timer&&(clearInterval(this._timer),this._countdownEl.innerText=this._countdownNumber,this._timer=null)}openModalOnClassChange(e){e[0].target.classList.contains(this.openClass)&&e[0].oldValue.indexOf(this.openClass)==-1&&(this._modalTriggerEl=document.querySelector(this.triggerElSelector),this.doModalOpen())}connectedCallback(){super.connectedCallback(),this._boundOpenModalHandler=this.openModalOnClassChange.bind(this),this._openModalObserver=new MutationObserver(this._boundOpenModalHandler),this._openModalObserver.observe(this,{attributeFilter:["class"],attributeOldValue:!0}),this.setTimer()}disconnectedCallback(){super.disconnectedCallback(),F.unsubscribe(this._modalEventSubscriber),this._openModalObserver.disconnnect()}constructor(){super()}}customElements.define("exceed-continue-modal",fi);class pi extends I{static get is(){return"exceed-countdown-clock"}static get properties(){return{targetDateTimeForUser:{type:String,value:""},userTimezoneOffsetForNow:{type:Number,value:new Date().getTimezoneOffset()},userTimezoneOffsetForTarget:{type:Number,value:new Date().getTimezoneOffset()},timerInterval:{type:Number,value:1},isReloadedOnCountdownEnd:{type:Boolean,value:!1},isUnitNumbersPadded:{type:Boolean,value:!1},wrapperSelector:{type:String,value:".countdownclock"},visibleClass:{type:String,value:"countdownclock--visible"},daysUnitTextSelector:{type:String,value:'[data-unit="days"] .countdownclock__unitcount'},hoursUnitTextSelector:{type:String,value:'[data-unit="hours"] .countdownclock__unitcount'},minutesUnitTextSelector:{type:String,value:'[data-unit="minutes"] .countdownclock__unitcount'},secondsUnitTextSelector:{type:String,value:'[data-unit="seconds"] .countdownclock__unitcount'}}}toggleVisible(e=!1){e?this._wrapperEl.classList.add(this.visibleClass):this._wrapperEl.classList.remove(this.visibleClass)}updateContent(e=this.getTimeDifference(this._targetDateTime)){if(e>0){const t=this.getTimeUnitsFromMs(e);for(let i=0;i<4;i++)this._timeUnitTextEls[i]&&this._timeUnitTextEls[i].textContent!=t[i]&&(this._timeUnitTextEls[i].textContent=t[i])}else this.stopTimer(),this.toggleVisible(!1),this.isReloadedOnCountdownEnd&&location.reload()}getTimeUnitsFromMs(e,t=this.isUnitNumbersPadded){const i=Math.floor(e/1e3),r=Math.floor(i/60),s=Math.floor(r/60);let o=[Math.floor(s/24).toString(),(s%24).toString(),(r%60).toString(),(i%60).toString()];return t&&o.forEach((u,l)=>{o.splice(l,1,u.padStart(2,"0"))}),o}getTimeDifference(e=new Date,t=new Date){let i=e.getTime()-t.getTime();return i>=0?i:0}setTimer(){this.timerInterval>0&&(this._timer=window.setInterval(()=>{this.updateContent()},this.timerInterval*1e3))}stopTimer(){window.clearInterval(this._timer)}initElement(){if(this.targetDateTimeForUser.length&&(this._wrapperEl=this.querySelector(this.wrapperSelector)||this,this._daysUnitTextEl=this.querySelector(this.daysUnitTextSelector),this._hoursUnitTextEl=this.querySelector(this.hoursUnitTextSelector),this._minutesUnitTextEl=this.querySelector(this.minutesUnitTextSelector),this._secondsUnitTextEl=this.querySelector(this.secondsUnitTextSelector),this._daysUnitTextEl||this._hoursUnitTextEl||this._minutesUnitTextEl||this._secondsUnitTextEl)){this._targetDateTime=new Date(this.targetDateTimeForUser),this._timeUnitTextEls=[this._daysUnitTextEl,this._hoursUnitTextEl,this._minutesUnitTextEl,this._secondsUnitTextEl];let e=this.getTimeDifference(this._targetDateTime);e>0&&(this.updateContent(e),this.setTimer(),this.toggleVisible(!0))}}connectedCallback(){super.connectedCallback(),this.initElement()}disconnectedCallback(){super.disconnectedCallback(),this.stopTimer()}}customElements.define("exceed-countdown-clock",pi);let Ke="in 1 minute",Xe="in {{COUNT}} minutes",Je="in 1 hour",Ze="in {{COUNT}} hours",Ge="tomorrow",et="in {{COUNT}} days",tt="now";window.Intellum&&window.Intellum.i18nStrings&&(Ke=window.Intellum.i18nStrings.in_one_minute,Xe=window.Intellum.i18nStrings.in_minutes,Je=window.Intellum.i18nStrings.in_one_hour,Ze=window.Intellum.i18nStrings.in_hours,Ge=window.Intellum.i18nStrings.tomorrow,et=window.Intellum.i18nStrings.in_days,tt=window.Intellum.i18nStrings.live_now);class mi extends I{static get is(){return"exceed-countdown-text"}static get properties(){return{targetDateTimeForUser:{type:String,value:""},userTimezoneOffsetForNow:{type:Number,value:new Date().getTimezoneOffset()},userTimezoneOffsetForTarget:{type:Number,value:new Date().getTimezoneOffset()},timerInterval:{type:Number,value:60},textInOneMinute:{type:String,value:Ke},textInMinutes:{type:String,value:Xe},textInOneHour:{type:String,value:Je},textInHours:{type:String,value:Ze},textTomorrow:{type:String,value:Ge},textInDays:{type:String,value:et},textNow:{type:String,value:tt}}}getTimeOfDate(e,t){const i="en-US",r="short";let s="",a=t==null?new Date:new Date(t);if(e==a.getTimezoneOffset())s=new Intl.DateTimeFormat(i,{dateStyle:r}).format(a);else{let o=a.getTime(),u=a.getTimezoneOffset()*6e4,l=o+u,m=-(e*6e4),d=l+m;s=new Intl.DateTimeFormat(i,{dateStyle:r}).format(new Date(d))}return new Date(s).getTime()}calculateDaysAway(){let e=this.getTimeOfDate(this.userTimezoneOffsetForNow),i=this.getTimeOfDate(this.userTimezoneOffsetForTarget,this.targetDateTimeForUser)-e,r=-1;return i>=0&&(r=Math.floor(i/(24*60*6e4))),r}getTimeRemainingText(){let e=(this._date-Date.now())/1e3,t=this.calculateDaysAway();return t==0?e<=0?this.textNow:e<120?this.textInOneMinute:e<3600?this.textInMinutes.replace("{{COUNT}}",Math.floor(e/60)):e<7200?this.textInOneHour:this.textInHours.replace("{{COUNT}}",Math.floor(e/3600)):t==1?this.textTomorrow:t>1?this.textInDays.replace("{{COUNT}}",t):""}updateContent(){this.innerHTML=this.getTimeRemainingText()}initElement(){this.targetDateTimeForUser.length&&(this._date=new Date(this.targetDateTimeForUser).getTime(),this.updateContent(),this._timer=window.setInterval(()=>{this.updateContent()},this.timerInterval*1e3))}connectedCallback(){super.connectedCallback(),this.initElement()}disconnectedCallback(){super.disconnectedCallback(),window.clearInterval(this._timer)}}customElements.define("exceed-countdown-text",mi);class vi extends I{static get is(){return"exceed-filter-counter"}static get properties(){return{textProperty:{type:String,value:"counterText"}}}bindToEvents(){F.subscribe(B.filters_counter,(e,t)=>{if(t[this.textProperty]!==void 0){if(this.innerHTML===t[this.textProperty])return this.innerHTML=`${t[this.textProperty]}`;this.innerHTML=t[this.textProperty]}})}connectedCallback(){this.bindToEvents()}}customElements.define("exceed-filter-counter",vi);class gi extends I{static get is(){return"exceed-filter-pagination"}static get properties(){return{paginationLinkSelector:{type:String,value:"a.pagination__link"},scrollToTop:{type:Boolean,value:!1}}}bindPaginationLinks(){this.querySelectorAll(this.paginationLinkSelector).forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let i=e.getAttribute("href");history.pushState({path:i},"",i),F.publish(B.filters_update),this.scrollToTop&&window.scrollTo(0,0,"smooth")})})}connectedCallback(){super.connectedCallback(),this.bindPaginationLinks()}}customElements.define("exceed-filter-pagination",gi);class yi extends vt{static get is(){return"exceed-filter-tags"}static get properties(){return{tagElSelector:{type:String,value:".tag"},tagContainerElSelector:{type:String,value:".tag"},removeButtonSelector:{type:String,value:"button"},isTagsPersistent:{type:Boolean,value:!1},tagButtonSelector:{type:String,value:".tagbutton"},tagButtonSelectedClass:{type:String,value:"tagbutton--selected"},xhrUrl:{type:String,value:""}}}removeFilter(e){let t=e.target.closest(this.tagContainerElSelector);t&&(t.parentNode.removeChild(t),this.setValues(),this.sendUpdateEvent())}toggleFilter(e){if(e.target.closest(this.tagContainerElSelector)){let i=e.target.closest(this.tagButtonSelector);i&&(i.classList.contains(this.tagButtonSelectedClass)?(i.classList.remove(this.tagButtonSelectedClass),i.setAttribute("aria-pressed","false")):(i.classList.add(this.tagButtonSelectedClass),i.setAttribute("aria-pressed","true"))),this.setValues(),this.sendUpdateEvent()}}setValues(){this.filterValues=[],this.isTagsPersistent?this.querySelectorAll(`.${this.tagButtonSelectedClass}`).forEach(e=>{let t=e.closest(this.tagElSelector);this.filterValues.push(t.dataset.value)}):this.querySelectorAll(this.tagElSelector).forEach(e=>{this.filterValues.push(e.dataset.value)})}refreshTags(e){if(!e&&this.xhrUrl.length&&this.filterName){let t=gt.parse(location.search,{arrayFormat:"bracket"});je.get(this.xhrUrl,{params:t}).then(i=>{this.innerHTML=i.data,this.querySelectorAll(this.removeButtonSelector).forEach(r=>{r.addEventListener("click",this._boundClickHandler)})}).catch(()=>{})}}sendUpdateEvent(){F.publish(B.filters_tags,{filterName:this.filterName,filterValues:this.filterValues})}bindUpdateSubscription(){F.subscribe(B.filters_block,(e,t)=>{this.refreshTags(t.isOnPageLoad)})}bindRemoveTagButtons(){this._boundClickHandler=this.removeFilter.bind(this),this.querySelectorAll(this.removeButtonSelector).forEach(e=>{e.addEventListener("click",this._boundClickHandler)})}bindPersistentButtons(){this._boundClickHandler=this.toggleFilter.bind(this),this.querySelectorAll(this.tagButtonSelector).forEach(e=>{e.addEventListener("click",this._boundClickHandler)})}initComponent(){this.bindUpdateSubscription(),this.isTagsPersistent?this.bindPersistentButtons():this.bindRemoveTagButtons(),this.setValues()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){(this.isTagsPersistent?this.querySelectorAll(this.tagButtonSelector):this.querySelectorAll(this.removeButtonSelector)).forEach(t=>{t.removeEventListener("click",this._boundClickHandler)})}}customElements.define("exceed-filter-tags",yi);class bi extends I{static get is(){return"exceed-forum-updates-subscribe"}static get properties(){return{channel:{type:String},forumElId:{type:String}}}getForumEl(){if(window.Intellum&&window.Intellum.forums)return window.Intellum.forums[this.forumElId]}handleMessage(e){this._forumEl.checkForUpdates()}init(){this.centrifugo&&!this._subscription&&(this._forumEl=this.getForumEl(),this._forumEl&&(this._subscription=this.centrifugo.subscribe(this.channel,this.handleMessage.bind(this))))}connectedCallback(){super.connectedCallback(),this.centrifugo=oe,this.init()}}customElements.define("exceed-forum-updates-subscribe",bi);class _i extends I{static get is(){return"exceed-hero-video"}static get properties(){return{pausePlaySelector:{type:String,value:".herovideo__pauseplay"},pausePlayHiddenClass:{type:String,value:"herovideo__pauseplay--hidden"}}}handlePausePlayButton(e){let t=this._video.paused||this._video.ended;t?this._video.play():this._video.pause(),t=!t,this._pausePlayButtons.forEach(i=>{t?i.getAttribute("data-behavior")=="play"?(i.classList.remove(this.pausePlayHiddenClass),i.focus()):i.classList.add(this.pausePlayHiddenClass):i.getAttribute("data-behavior")=="pause"?(i.classList.remove(this.pausePlayHiddenClass),i.focus()):i.classList.add(this.pausePlayHiddenClass)})}bindEventHandlers(){this._boundPausePlayButtonHandler=this.handlePausePlayButton.bind(this),this._pausePlayButtons=this.querySelectorAll(this.pausePlaySelector),this._pausePlayButtons&&this._pausePlayButtons.forEach(e=>{e.addEventListener("click",this._boundPausePlayButtonHandler)})}unbindEventHandlers(){this._pausePlayButtons&&this._pausePlayButtons.forEach(e=>{e.removeEventListener("click",this._boundPausePlayButtonHandler)})}init(){if(this._video=this.querySelector("video"),this._video)this.bindEventHandlers();else return}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.disconnectedCallback(),this.unbindEventHandlers()}}customElements.define("exceed-hero-video",_i);class wi extends I{static get is(){return"exceed-lazyload-section"}static get properties(){return{xhrUrl:{type:String,value:""},xhrErrorText:{type:String,value:"The section could not be loaded."}}}lazyLoadRows(){let e=()=>{je.get(this.xhrUrl).then(r=>{this.innerHTML=r.data,Intellum.lazyload.init(),Intellum.util.reinitialize.trigger(),window.setTimeout(()=>{this.dataset.contentLoaded="true"},100)}).catch(r=>{this.innerHTML=`<p>${this.xhrErrorText}</p>`})},t=r=>{r.forEach(s=>{s.isIntersecting&&!s.target.dataset.lazyLoadContent!="true"&&s.target.dataset.lazyLoadContentLoaded!="true"&&(e(s.target),window.requestIdleCallback(function(){window.Intellum.truncate!==void 0&&window.Intellum.truncate.init({scope:s.target})},{timeout:100}))})},i=new IntersectionObserver(t,{rootMargin:"800px",threshold:.5});i.POLL_INTERVAL=100,i.observe(this)}initComponent(){this.lazyLoadRows()}connectedCallback(){super.connectedCallback(),this.initComponent()}disconnectedCallback(){super.disconnectedCallback()}}customElements.define("exceed-lazyload-section",wi);class Ei extends I{static get is(){return"exceed-level-xp-subscribe"}static get properties(){return{channel:{type:String},onOutdated:{type:String,value:'<span class="loading--textdots"><span class="a11y-atonly">Loading</span></span>'}}}handleMessage(e){e.data.event=="set"?this.innerHTML=e.data.value:e.data.event=="outdated"&&(this.innerHTML=this.onOutdated)}init(){this.centrifugo&&!this._subscription&&(this._subscription=this.centrifugo.subscribe(this.channel,this.handleMessage.bind(this)))}connectedCallback(){super.connectedCallback(),this.centrifugo=oe,this.init()}}customElements.define("exceed-level-xp-subscribe",Ei);class Si extends I{static get is(){return"exceed-nav-text"}static get properties(){return{listElSelector:{type:String,value:".appnav__list"},listitemElSelector:{type:String,value:".appnav__listitem--text"},listitemMenuElSelector:{type:String,value:".appnav__listitem--navmenu"},menuElSelector:{type:String,value:".navmenu__menu"},menuElContainerSelector:{type:String,value:".appnav__listitem:not(.appnav__listitem--text)"},listitemElClasses:{type:Array,value:["appnav__listitem","appnav__listitem--text"]},listitemLinkClasses:{type:Array,value:["appnav__link","appnav__link--text","u-org--header","u-orgcolor--borderhover"]},listitemCurrentLinkClasses:{type:Array,value:["appnav__link","appnav__link--text","u-org--header","appnav__link--current","u-orgcolor--borderonly"]},menuListitemElClasses:{type:Array,value:["appnav__sublistitem","navmenu__menuitem"]},menuListitemLinkClasses:{type:Array,value:["appnav__sublink"]},menuListitemCurrentLinkClasses:{type:Array,value:["appnav__sublink","appnav__sublink--current"]},currentListClassModifier:{type:String,value:"--current"}}}getMaxMenuLength(){return this._menuElContainer.hasAttribute("hidden")?0:this._listitemEls.length}doFillMenu(e){let t=e[e.length-1],i=t.querySelector("a"),r=i.getAttribute("class").includes(this.currentListClassModifier);t.classList.remove(...t.classList),i.classList.remove(...i.classList),t.classList.add(...this.menuListitemElClasses);let s=r?this.menuListitemCurrentLinkClasses:this.menuListitemLinkClasses;i.classList.add(...s),this._menuElContainer.removeAttribute("hidden"),this._menuEl.prepend(t)}doFillMain(e,t,i,r){if(t.length&&!(this._maxItems!=0&&e.length>=this._maxItems)){let s=t[0],o=s.querySelector("a").getAttribute("class").includes(this.currentListClassModifier),u=s.cloneNode(!0),l=u.querySelector("a");u.classList.remove(...u.classList),l.classList.remove(...l.classList),u.classList.add(...this.listitemElClasses);let m=o?this.listitemCurrentLinkClasses:this.listitemLinkClasses;l.classList.add(...m),u.style.opacity="0",this._listEl.insertBefore(u,this._menuElContainer),i.style.overflow="hidden",this._menuEl.style.display="none";let d=this.scrollWidth;i.style.overflow="",this._menuEl.style.display="block",d>r?this._listEl.removeChild(u):(u.style.opacity="1",this._menuEl.removeChild(s),this._menuEl.querySelectorAll("li").length||this._menuElContainer.setAttribute("hidden",!0),this.adjustNavList("main"))}}adjustNavList(e=null){let t=this._listEl.querySelectorAll(this.listitemElSelector),i=this._menuEl.querySelectorAll("li"),r=this.parentElement;r.style.overflow="hidden",this._menuEl.style.display="none";let s=this.scrollWidth,a=r.clientWidth;r.style.overflow="",this._menuEl.style.display="block",s>a?e!="menu"&&this.doFillMenu(t):s<a&&e!="main"&&this.doFillMain(t,i,r,a)}handleWindowResize(){window.addEventListener("resize",Ve(()=>{this.adjustNavList()},250))}init(){this._listEl=this.querySelector(this.listElSelector),this._listitemEls=this.querySelectorAll(this.listitemElSelector),this._menuEl=this.querySelector(this.menuElSelector),this._listEl&&this._listitemEls.length&&this._menuEl&&(this._listitemMenuEl=this.querySelector(this.listitemMenuElSelector),this._menuElContainer=this.querySelector(this.menuElContainerSelector),this._maxItems=this.getMaxMenuLength(),this.adjustNavList(),this.handleWindowResize())}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.disconnectedCallback()}}customElements.define("exceed-nav-text",Si);class ki{constructor(){this.push=wt}publishChangeEvent(){F.publish(B.notifications_change,{})}permission(){return this.push.Permission.get()}isSupported(){return this.push.supported()}requestPermission(e,t){this.push.Permission.request(()=>{this.publishChangeEvent(),e&&e()},()=>{this.publishChangeEvent(),t&&t()})}create(e){var t=e.title,i={tag:e.tag,body:e.body||"",icon:e.icon||"",requireInteraction:e.require_interaction||!1};return new Notification(t,i)}}const it=new ki;class Ci extends I{static get is(){return"exceed-notifications-control"}static get properties(){return{enableNotificationsElId:{type:String,value:""},defaultElId:{type:String,value:""},grantedElId:{type:String,value:""},deniedElId:{type:String,value:""},permissionGrantedMessage:{type:String,value:""},permissionDeniedMessage:{type:String,value:""}}}maybeShow(e){e&&e.classList.remove("hide")}maybeHide(e){e&&e.classList.add("hide")}updateState(){var e=this.notifications.permission();e==="default"?(this.maybeShow(this._defaultEl),this.maybeHide(this._grantedEl),this.maybeHide(this._deniedEl)):e==="granted"?(this.maybeHide(this._defaultEl),this.maybeShow(this._grantedEl),this.maybeHide(this._deniedEl)):e==="denied"&&(this.maybeHide(this._defaultEl),this.maybeHide(this._grantedEl),this.maybeShow(this._deniedEl))}alertPermissionGranted(){this.permissionGrantedMessage&&window.Intellum&&window.Intellum.flashnotice&&this.permissionDeniedMessage!==""&&Intellum.flashnotice.show(this.permissionGrantedMessage)}alertPermissionDenied(){this.permissionDeniedMessage&&(window.Intellum&&window.Intellum.flashnotice&&this.permissionDeniedMessage!==""?Intellum.flashnotice.show(this.permissionDeniedMessage):alert(this.permissionDeniedMessage))}enableNotifications(e){this.notifications.requestPermission(this.alertPermissionGranted.bind(this),this.alertPermissionDenied.bind(this)),this.dispatchEvent(new CustomEvent("navmenu.hide",{bubbles:!0})),e.preventDefault()}bindEnableNotificationsButton(){if(!this._boundEnableNotifications){var e=document.getElementById(this.enableNotificationsElId);e&&(this._boundEnableNotifications=this.enableNotifications.bind(this),this.addEventListener("click",this._boundEnableNotifications))}}init(){this.notifications.isSupported()?(this._defaultEl=document.getElementById(this.defaultElId),this._grantedEl=document.getElementById(this.grantedElId),this._deniedEl=document.getElementById(this.deniedElId),F.subscribe(B.notifications_change,this.updateState.bind(this)),this.updateState(),this.bindEnableNotificationsButton(),this.maybeShow(this)):this.maybeHide(this)}connectedCallback(){super.connectedCallback(),this.notifications=it,this.init()}}customElements.define("exceed-notifications-control",Ci);class Ti extends I{static get is(){return"exceed-notifications-subscribe"}static get properties(){return{channel:{type:String},notificationsDrawerElId:{type:String,value:"updatedrawer-main"}}}changeNotificationsBadge(e){document.dispatchEvent(new window.CustomEvent("notifications.unreadNumberChange",{detail:{type:"increment",value:e}}))}forceNotificationsDrawerReload(){this._updateDrawer&&this._updateDrawer.resetOnUnreadNumberChange()}openNotificationsDrawer(){this._updateDrawer&&(window.focus(),this._updateDrawer.openUpdatedrawer())}openNewTab(e){window.open(e,"_blank")}runAction(e){e.url&&e.url!=""?this.openNewTab(e.url):this.openNotificationsDrawer()}markAsRead(e){this._updateDrawer&&e.user_mentor_card_id&&this._updateDrawer.postMarkOneRead(e.user_mentor_card_id)}notify(e){e.tag=`userMentorCard-${e.user_mentor_card_id}`;var t=this.notifications.create(e);t.onclick=(function(){this.runAction(e),t.close()}).bind(this),t.onclose=(function(){this.markAsRead(e),this.changeNotificationsBadge(-1),this.forceNotificationsDrawerReload()}).bind(this)}handleNotification(e){this.changeNotificationsBadge(1),this.forceNotificationsDrawerReload(),this.notifications.requestPermission((function(){this.notify(e.data)}).bind(this))}init(){this.notifications.isSupported()&&this.centrifugo&&!this._subscription&&(this.notificationsDrawerElId&&window.Intellum&&window.Intellum.updatedrawers&&(this._updateDrawer=window.Intellum.updatedrawers[this.notificationsDrawerElId]),this._subscription=this.centrifugo.subscribe(this.channel,this.handleNotification.bind(this)))}connectedCallback(){super.connectedCallback(),this.centrifugo=oe,this.notifications=it,this.init()}}customElements.define("exceed-notifications-subscribe",Ti);class Pi extends I{static get is(){return"exceed-pages-outline"}static get properties(){return{wrapperElSelector:{type:String,value:".pageoutline"},outputElSelector:{type:String,value:".pageoutline__output"},targetElSelector:{type:String,value:".page__courses"},headingOffset:{type:Number,value:20},currentLinkClass:{type:String,value:"pageoutline__currentlink"}}}createListElement(e,t,i){const r=document.createElement(e);return Object.keys(t).length&&Object.keys(t).forEach(s=>{r.setAttribute(s,t[s])}),i&&(r.textContent=i),r}checkForScrolling(){const e=window.setInterval(()=>{this._isScrolling?this._isScrolling=!1:window.setTimeout(()=>{this._isTargetingAnchor=!1,window.clearInterval(e)},200)},100)}highlightSelectedLink(){const e=this._outputEl.querySelector(`[data-anchor="${this._urlAnchor}"]`);e&&(e.classList.contains(this.currentLinkClass)||(this._outputEl.querySelectorAll("[data-anchor]").forEach(t=>{t.classList.remove(this.currentLinkClass)}),e.classList.add(this.currentLinkClass)))}handleClickOnList(e){if(this._outputEl.contains(e.target)){e.preventDefault(),history.pushState({},"",e.target.hash),this._urlAnchor=e.target.hash.slice(1);const i=document.getElementById(e.target.dataset.anchor).getBoundingClientRect().top+(window.pageYOffset-this._scrollTopOffset);this._elPos=i,this._isTargetingAnchor=!0,this._isScrolling=!1,window.MSInputMethodContext&&document.documentMode?document.documentElement.scrollTop=i:window.scrollTo({top:i,behavior:"smooth"}),this.highlightSelectedLink(),this.checkForScrolling()}}handleOutlinePosition(){const e=this._scrollTopOffset,t=window.pageYOffset;let r=document.querySelector(".pgheading").getBoundingClientRect().top+window.pageYOffset-40;r=Math.floor(r),t+(e+this.headingOffset)>=r?(this._wrapperEl.setAttribute("style",`top: ${e+40}px`),this._wrapperEl.classList.add("pageoutline--fixed")):(this._wrapperEl.setAttribute("style",`top: ${r-e+40}px`),this._wrapperEl.classList.remove("pageoutline--fixed"))}handleCurrentListItem(){this._isScrolling=!0,this._isTargetingAnchor?this.highlightSelectedLink():this._headerElsFormatted.forEach((e,t)=>{const i=this._scrollTopOffset;let r=e.node.getBoundingClientRect().top+window.pageYOffset;r=Math.floor(r);let s=this._headerElsFormatted[t+1]!==void 0?this._headerElsFormatted[t+1].node.getBoundingClientRect().top+window.pageYOffset:this._targetEl.getBoundingClientRect().bottom+window.pageYOffset;s=Math.floor(s);const a=window.pageYOffset,o=this._outputEl.querySelector(`[data-anchor="${e.id}"]`);window.requestAnimationFrame(()=>{a>=r-i&&a<s-i?o.classList.add(this.currentLinkClass):o.classList.remove(this.currentLinkClass)})})}setupList(){let e="H2",t,i;const r=this.createListElement("ul",{class:"pageoutline__list"});this._headerElsFormatted.forEach(s=>{if(s.nodeName==="H3"){const a=this.createListElement("li",{class:"pageoutline__listitem"}),o=this.createListElement("a",{class:"pageoutline__sublink",href:`${window.location.pathname}#${s.id}`,"data-anchor":s.id},s.textContent);if(e!=="H3"){const u=this.createListElement("li",{class:"pageoutline__list"});a.appendChild(o),u.appendChild(a),t=u,i.appendChild(u)}else a.appendChild(o),t.appendChild(a)}else{const a=this.createListElement("li",{class:"pageoutline__listitem"}),o=this.createListElement("a",{class:"pageoutline__link",href:`${window.location.pathname}#${s.id}`,"data-anchor":s.id},s.textContent);a.appendChild(o),i=a,r.appendChild(a)}e=s.nodeName}),this._outputEl.appendChild(r)}bindTriggers(){this._boundListClickHandler=this.handleClickOnList.bind(this),this._boundOutlinePositionHandler=this.handleOutlinePosition.bind(this),this._boundCurrentListItemHandler=this.handleCurrentListItem.bind(this),this._focusableEventEls=[],this._focusableEls=this._outputEl.querySelectorAll("[href]"),this._focusableEls.forEach(e=>{e.addEventListener("click",this._boundListClickHandler),this._focusableEventEls.push(e)}),window.Intellum&&window.Intellum.util&&window.Intellum.util.scroll?(Intellum.util.scroll.addHandler(this._boundOutlinePositionHandler),Intellum.util.scroll.addHandler(this._boundCurrentListItemHandler)):window.addEventListener("scroll",e=>{this._boundOutlinePositionHandler(),this._boundCurrentListItemHandler()})}setPositionOnLoad(){window.addEventListener("load",()=>{if(this._boundOutlinePositionHandler(),this._boundCurrentListItemHandler(),window.location.hash){const t=document.querySelector(window.location.hash).getBoundingClientRect().top+(window.pageYOffset-this._scrollTopOffset);document.documentElement.scrollTop=t,this.checkForScrolling()}})}unbindAllEvents(){this._focusableEventEls.forEach(e=>{e.removeEventListener("blur",this._boundListClickHandler)}),window.Intellum&&window.Intellum.util&&window.Intellum.util.scroll?(Intellum.util.scroll.removeHandler(this._boundOutlinePositionHandler),Intellum.util.scroll.removeHandler(this._boundCurrentListItemHandler)):window.removeEventListener("scroll",()=>{this._boundOutlinePositionHandler(),this._boundCurrentListItemHandler()})}init(){const e=document.querySelector(".appheader");this._scrollTopOffset=(e?e.offsetHeight:0)+this.headingOffset,this._wrapperEl=this.querySelector(this.wrapperElSelector),this._outputEl=this.querySelector(this.outputElSelector),this._targetEl=document.querySelector(this.targetElSelector),this._headerElsFormatted=[],this._targetEl&&(this._headerEls=this._targetEl.querySelectorAll(".pgpost h2, .pgpost h3")),this._urlAnchor=window.location.hash.slice(1),this._isEmbeddedWidget=window.Cookies.get("is_exceed_embedded_widget")=="true",this._isTargetingAnchor=!!this._urlAnchor.length,this._isTargetingAnchor&&this._isEmbeddedWidget&&setTimeout(()=>{window.location.href=window.location.href},500),this._isScrolling=!1;let t=!0;this._headerEls&&this._headerEls.forEach((i,r)=>{let s={};i.setAttribute("id",`${i.textContent.trim().replace(/[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/g,"").replace(/\s+/g,"-").toLowerCase()}-${r}`),s={node:i,id:i.id,textContent:i.textContent},i.nodeName==="H2"&&(t=!1),i.nodeName==="H3"&&t?s.nodeName="H2":s.nodeName=i.nodeName,this._headerElsFormatted.push(s)}),this._outputEl&&this._headerElsFormatted.length&&(this.setupList(),this.bindTriggers(),this.setPositionOnLoad(),this._wrapperEl.classList.add("pageoutline--visible"))}connectedCallback(){super.connectedCallback(),this.init()}disconnectedCallback(){super.disconnectedCallback(),this.unbindAllEvents()}}customElements.define("exceed-pages-outline",Pi);class xi extends I{static get is(){return"exceed-password-strength"}static get properties(){return{passwordInputSelector:{type:String,value:'[type="password"]'},maxScore:{type:String,value:"4"}}}doMeterUpdate(){if(this.passwordInputEl.value.length){let e=window.zxcvbn(this.passwordInputEl.value).score;this.passwordStrengthEl.dataset.score=(e+1)/(parseInt(this.maxScore)+1),this.passwordStrengthEl.innerText=this.scoresText[e]||""}else this.passwordStrengthEl.dataset.score=0,this.passwordStrengthEl.innerText=""}addEventHandler(){this.passwordInputEl.addEventListener("keyup",e=>{this.doMeterUpdate(e)})}addMeterHtml(){this.passwordStrengthEl=document.createElement("div"),this.passwordStrengthEl.classList.add("passwordstrength__meter"),this.appendChild(this.passwordStrengthEl)}initElement(){if(this.passwordInputEl=this.querySelector(this.passwordInputSelector),this.passwordInputEl&&window.zxcvbn){try{this.scoresText=JSON.parse(this.dataset.scoresText)}catch{this.scoresText={}}this.addMeterHtml(),this.addEventHandler()}}connectedCallback(){super.connectedCallback(),this.initElement()}}customElements.define("exceed-password-strength",xi);class Li extends I{static get is(){return"exceed-scroll-row"}static get properties(){return{scrollElSelector:{type:String,value:".catalogcards__list"},scrollItemElSelector:{type:String,value:".catalogcards__listitem"},headerElSelector:{type:String,value:".catalogcards__header"},prevButtonElSelector:{type:String,value:".catalogcards__navbutton--prev"},nextButtonElSelector:{type:String,value:".catalogcards__navbutton--next"},buttonHiddenClass:{type:String,value:"catalogcards__navbutton--hidden"},listScrollingClass:{type:String,value:"catalogcards__list--scrolling"},buttonHeight:{type:Number,value:48}}}hideUnneededNavigation(){let e,t=this._scrollEl.children[this._scrollEl.children.length-1];this._isRtl?e=t.offsetLeft>=0:e=this._scrollEl.clientWidth>=t.offsetLeft+t.clientWidth,e?(this._prevButtonEl.classList.add(this.buttonHiddenClass),this._nextButtonEl.classList.add(this.buttonHiddenClass)):(this._prevButtonEl.classList.remove(this.buttonHiddenClass),this._nextButtonEl.classList.remove(this.buttonHiddenClass))}updateControls(){if(this._prevButtonEl&&this._nextButtonEl){this.hideUnneededNavigation();let e=this._isRtl?this._scrollEl.scrollLeft<0:this._scrollEl.scrollLeft>0,t=this._isRtl?this._scrollEl.clientWidth-this._scrollEl.scrollLeft<this._scrollEl.scrollWidth:this._scrollEl.clientWidth+this._scrollEl.scrollLeft<this._scrollEl.scrollWidth;e?this._prevButtonEl.removeAttribute("disabled"):this._prevButtonEl.setAttribute("disabled","disabled"),t?this._nextButtonEl.removeAttribute("disabled"):this._nextButtonEl.setAttribute("disabled","disabled")}}placeControls(){if(this._prevButtonEl&&this._nextButtonEl&&this._scrollItemsEl.length&&window.getComputedStyle(this._prevButtonEl).getPropertyValue("position")=="absolute"){let e=this.offsetTop,t=this._scrollItemsEl[0].offsetHeight,i=e+t/2-this.buttonHeight/2;this._prevButtonEl.style.top=`${i}px`,this._nextButtonEl.style.top=`${i}px`}}addMomentumToScroll(){this._scrollEl.scrollWidth>this._scrollEl.clientWidth?this._scrollEl.classList.add(listScrollingClass):this._scrollEl.classList.remove(listScrollingClass)}handleWindowResize(){this.resetComponent(),this.limitScroll()}throttle(e,t){let i=!1;return()=>{i||(e.call(),i=!0,window.setTimeout(function(){i=!1},t))}}limitScroll(){if(this._scrollEl.children.length){let e=this._scrollEl.children[this._scrollEl.children.length-1],t=e.offsetLeft+e.clientWidth-this._scrollEl.children[0].offsetLeft-this._scrollEl.children.clientWidth;this._scrollEl.scrollLeft>t&&(this._scrollEl.scrollLeft=t)}}smoothScrollTo(e,t){let i=this._scrollEl.scrollLeft,r=e,s=400,a,o,u=(d,f,_,b)=>{var T;return d/=b/2,d<1?T=(_-f)/2*d*d:(d--,T=(f-_)/2*(d*(d-2)-1)),f+T},l=()=>{this._scrollEl.scrollLeft=e,typeof t=="function"&&t()},m=d=>{o=d-a,this._scrollEl.scrollLeft=u(o,i,r,s),o<s?window.requestAnimationFrame(m):l()};window.requestAnimationFrame(d=>{a=d,m(d)})}handlePrevClick(e){if(this._scrollEl.childNodes.length){let i=this._scrollEl.children,r,s,a;for(var t=i.length-1;t>=0;t--)if(s=i[t].offsetLeft-this._scrollEl.scrollLeft,a=s+i[t].clientWidth,this._isRtl){if(a>this._scrollEl.clientWidth){r=this._scrollEl.scrollLeft+s;break}}else if(s<0){r=s+i[t].clientWidth+this._scrollEl.scrollLeft-this._scrollEl.clientWidth;break}this._isScrolling=!0,this.smoothScrollTo(r,()=>{this._isScrolling=!1,this.updateControls()})}}handleManualScrolling(e){this.updateControls()}handleNextClick(e){if(this._scrollEl.childNodes.length){let i=this._scrollEl.children,r,s,a;for(var t=0;t<i.length;t++)if(s=i[t].offsetLeft-this._scrollEl.scrollLeft,a=s+i[t].clientWidth,this._isRtl){if(s<0){r=this._scrollEl.scrollLeft-(this._scrollEl.clientWidth+a);break}}else if(a>this._scrollEl.clientWidth){r=s+this._scrollEl.scrollLeft;break}this._isScrolling=!0,this.smoothScrollTo(r,()=>{this._isScrolling=!1,this.updateControls()})}}bindEventHandlers(){this._prevButtonEl&&(this._boundPrevButtonEventHandler=this.handlePrevClick.bind(this),this._prevButtonEl.addEventListener("click",this._boundPrevButtonEventHandler)),this._nextButtonEl&&(this._boundNextButtonEventHandler=this.handleNextClick.bind(this),this._nextButtonEl.addEventListener("click",this._boundNextButtonEventHandler)),this._prevButtonEl&&this._nextButtonEl&&(this._boundManualScrollingHandler=Ve(()=>{this.handleManualScrolling()},250).bind(this),this._scrollEl.addEventListener("scroll",this._boundManualScrollingHandler))}unbindEventHandlers(){this._prevButtonEl&&this._prevButtonEl.removeEventListener("click",this._boundPrevButtonEventHandler),this._nextButtonEl&&this._nextButtonEl.removeEventListener("click",this._boundNextButtonEventHandler),this._prevButtonEl&&this._nextButtonEl&&this._scrollEl.removeEventListener("scroll",this._boundManualScrollingHandler)}resetComponent(){this.updateControls(),this.placeControls()}initComponent(){this._isRtl=document.dir==="rtl",this._scrollEl=this.querySelector(this.scrollElSelector),this._headerEl=this.closest(this.headerElSelector)||this.parentElement.querySelector(this.headerElSelector),this._scrollEl&&this._headerEl&&(this._prevButtonEl=this._headerEl.querySelector(this.prevButtonElSelector),this._nextButtonEl=this._headerEl.querySelector(this.nextButtonElSelector),this._scrollItemsEl=this.querySelectorAll(this.scrollItemElSelector),this.bindEventHandlers(),this.updateControls(),this.placeControls(),this._isScrolling=!1)}connectedCallback(){super.connectedCallback(),this.initComponent()}disconnectedCallback(){super.disconnectedCallback(),this._scrollEl&&this.unbindEventHandlers()}}customElements.define("exceed-scroll-row",Li);class Ii extends I{static get is(){return"exceed-remote-checkbox"}static get properties(){return{inputSelector:{type:String,value:'input[type="checkbox"]'},successMessage:{type:String,value:""},errorMessage:{type:String,value:""}}}bindRemoteResponses(){var e=this;window.jQuery&&window.Intellum&&Intellum.flashnotice&&(this.successMessage.length>0&&jQuery(this.inputEl).on("ajax:success",function(t,i,r,s){Intellum.flashnotice.show(e.successMessage)}),this.errorMessage.length>0&&jQuery(this.inputEl).on("ajax:error",function(t,i,r,s){Intellum.flashnotice.show(e.errorMessage,"warning")}))}bindInputChange(){this.inputEl.addEventListener("change",e=>{jQuery&&jQuery(this.inputEl).data("params",jQuery(this.inputEl).prop("name")+"="+this.inputEl.checked)})}initElements(){this.inputSelector&&(this.inputEl=this.querySelector(this.inputSelector))}connectedCallback(){super.connectedCallback(),this.initElements(),this.inputEl&&(this.bindRemoteResponses(),this.bindInputChange())}}customElements.define("exceed-remote-checkbox",Ii);class Mi extends I{static get is(){return"exceed-request-trigger-on-action"}static get properties(){return{actionElementSelector:{type:String,value:".button"},targetUrl:{type:String,value:""},event:{type:String,value:"click"},method:{type:String,value:"post"},doTrigger:{type:Boolean,value:!1}}}triggerAction(){W[this.method](this.targetUrl,{})}init(){this._actionElement=this.querySelector(this.actionElementSelector),this.targetUrl&&this._actionElement&&this._actionElement.addEventListener(this.event,e=>{this.doTrigger&&(this.triggerAction(),this.doTrigger=!1)})}connectedCallback(){super.connectedCallback(),this.init()}}customElements.define("exceed-request-trigger-on-action",Mi);/*! @vimeo/player v2.20.1 | (c) 2023 Vimeo | MIT License | https://github.com/vimeo/player.js */function Be(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function qe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Be(Object(t),!0).forEach(function(i){de(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Be(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function H(){H=function(){return n};var n={},e=Object.prototype,t=e.hasOwnProperty,i=Object.defineProperty||function(h,c,p){h[c]=p.value},r=typeof Symbol=="function"?Symbol:{},s=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(h,c,p){return Object.defineProperty(h,c,{value:p,enumerable:!0,configurable:!0,writable:!0}),h[c]}try{u({},"")}catch{u=function(c,p,C){return c[p]=C}}function l(h,c,p,C){var w=c&&c.prototype instanceof f?c:f,x=Object.create(w.prototype),N=new R(C||[]);return i(x,"_invoke",{value:E(h,p,N)}),x}function m(h,c,p){try{return{type:"normal",arg:h.call(c,p)}}catch(C){return{type:"throw",arg:C}}}n.wrap=l;var d={};function f(){}function _(){}function b(){}var T={};u(T,s,function(){return this});var L=Object.getPrototypeOf,P=L&&L(L(V([])));P&&P!==e&&t.call(P,s)&&(T=P);var y=b.prototype=f.prototype=Object.create(T);function v(h){["next","throw","return"].forEach(function(c){u(h,c,function(p){return this._invoke(c,p)})})}function g(h,c){function p(w,x,N,D){var U=m(h[w],h,x);if(U.type!=="throw"){var Z=U.arg,te=Z.value;return te&&typeof te=="object"&&t.call(te,"__await")?c.resolve(te.__await).then(function(Q){p("next",Q,N,D)},function(Q){p("throw",Q,N,D)}):c.resolve(te).then(function(Q){Z.value=Q,N(Z)},function(Q){return p("throw",Q,N,D)})}D(U.arg)}var C;i(this,"_invoke",{value:function(w,x){function N(){return new c(function(D,U){p(w,x,D,U)})}return C=C?C.then(N,N):N()}})}function E(h,c,p){var C="suspendedStart";return function(w,x){if(C==="executing")throw new Error("Generator is already running");if(C==="completed"){if(w==="throw")throw x;return _e()}for(p.method=w,p.arg=x;;){var N=p.delegate;if(N){var D=k(N,p);if(D){if(D===d)continue;return D}}if(p.method==="next")p.sent=p._sent=p.arg;else if(p.method==="throw"){if(C==="suspendedStart")throw C="completed",p.arg;p.dispatchException(p.arg)}else p.method==="return"&&p.abrupt("return",p.arg);C="executing";var U=m(h,c,p);if(U.type==="normal"){if(C=p.done?"completed":"suspendedYield",U.arg===d)continue;return{value:U.arg,done:p.done}}U.type==="throw"&&(C="completed",p.method="throw",p.arg=U.arg)}}}function k(h,c){var p=c.method,C=h.iterator[p];if(C===void 0)return c.delegate=null,p==="throw"&&h.iterator.return&&(c.method="return",c.arg=void 0,k(h,c),c.method==="throw")||p!=="return"&&(c.method="throw",c.arg=new TypeError("The iterator does not provide a '"+p+"' method")),d;var w=m(C,h.iterator,c.arg);if(w.type==="throw")return c.method="throw",c.arg=w.arg,c.delegate=null,d;var x=w.arg;return x?x.done?(c[h.resultName]=x.value,c.next=h.nextLoc,c.method!=="return"&&(c.method="next",c.arg=void 0),c.delegate=null,d):x:(c.method="throw",c.arg=new TypeError("iterator result is not an object"),c.delegate=null,d)}function M(h){var c={tryLoc:h[0]};1 in h&&(c.catchLoc=h[1]),2 in h&&(c.finallyLoc=h[2],c.afterLoc=h[3]),this.tryEntries.push(c)}function S(h){var c=h.completion||{};c.type="normal",delete c.arg,h.completion=c}function R(h){this.tryEntries=[{tryLoc:"root"}],h.forEach(M,this),this.reset(!0)}function V(h){if(h){var c=h[s];if(c)return c.call(h);if(typeof h.next=="function")return h;if(!isNaN(h.length)){var p=-1,C=function w(){for(;++p<h.length;)if(t.call(h,p))return w.value=h[p],w.done=!1,w;return w.value=void 0,w.done=!0,w};return C.next=C}}return{next:_e}}function _e(){return{value:void 0,done:!0}}return _.prototype=b,i(y,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:_,configurable:!0}),_.displayName=u(b,o,"GeneratorFunction"),n.isGeneratorFunction=function(h){var c=typeof h=="function"&&h.constructor;return!!c&&(c===_||(c.displayName||c.name)==="GeneratorFunction")},n.mark=function(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,b):(h.__proto__=b,u(h,o,"GeneratorFunction")),h.prototype=Object.create(y),h},n.awrap=function(h){return{__await:h}},v(g.prototype),u(g.prototype,a,function(){return this}),n.AsyncIterator=g,n.async=function(h,c,p,C,w){w===void 0&&(w=Promise);var x=new g(l(h,c,p,C),w);return n.isGeneratorFunction(c)?x:x.next().then(function(N){return N.done?N.value:x.next()})},v(y),u(y,o,"Generator"),u(y,s,function(){return this}),u(y,"toString",function(){return"[object Generator]"}),n.keys=function(h){var c=Object(h),p=[];for(var C in c)p.push(C);return p.reverse(),function w(){for(;p.length;){var x=p.pop();if(x in c)return w.value=x,w.done=!1,w}return w.done=!0,w}},n.values=V,R.prototype={constructor:R,reset:function(h){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!h)for(var c in this)c.charAt(0)==="t"&&t.call(this,c)&&!isNaN(+c.slice(1))&&(this[c]=void 0)},stop:function(){this.done=!0;var h=this.tryEntries[0].completion;if(h.type==="throw")throw h.arg;return this.rval},dispatchException:function(h){if(this.done)throw h;var c=this;function p(U,Z){return x.type="throw",x.arg=h,c.next=U,Z&&(c.method="next",c.arg=void 0),!!Z}for(var C=this.tryEntries.length-1;C>=0;--C){var w=this.tryEntries[C],x=w.completion;if(w.tryLoc==="root")return p("end");if(w.tryLoc<=this.prev){var N=t.call(w,"catchLoc"),D=t.call(w,"finallyLoc");if(N&&D){if(this.prev<w.catchLoc)return p(w.catchLoc,!0);if(this.prev<w.finallyLoc)return p(w.finallyLoc)}else if(N){if(this.prev<w.catchLoc)return p(w.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<w.finallyLoc)return p(w.finallyLoc)}}}},abrupt:function(h,c){for(var p=this.tryEntries.length-1;p>=0;--p){var C=this.tryEntries[p];if(C.tryLoc<=this.prev&&t.call(C,"finallyLoc")&&this.prev<C.finallyLoc){var w=C;break}}w&&(h==="break"||h==="continue")&&w.tryLoc<=c&&c<=w.finallyLoc&&(w=null);var x=w?w.completion:{};return x.type=h,x.arg=c,w?(this.method="next",this.next=w.finallyLoc,d):this.complete(x)},complete:function(h,c){if(h.type==="throw")throw h.arg;return h.type==="break"||h.type==="continue"?this.next=h.arg:h.type==="return"?(this.rval=this.arg=h.arg,this.method="return",this.next="end"):h.type==="normal"&&c&&(this.next=c),d},finish:function(h){for(var c=this.tryEntries.length-1;c>=0;--c){var p=this.tryEntries[c];if(p.finallyLoc===h)return this.complete(p.completion,p.afterLoc),S(p),d}},catch:function(h){for(var c=this.tryEntries.length-1;c>=0;--c){var p=this.tryEntries[c];if(p.tryLoc===h){var C=p.completion;if(C.type==="throw"){var w=C.arg;S(p)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(h,c,p){return this.delegate={iterator:V(h),resultName:c,nextLoc:p},this.method==="next"&&(this.arg=void 0),d}},n}function Fe(n,e,t,i,r,s,a){try{var o=n[s](a),u=o.value}catch(l){t(l);return}o.done?e(u):Promise.resolve(u).then(i,r)}function X(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function a(u){Fe(s,i,r,a,o,"next",u)}function o(u){Fe(s,i,r,a,o,"throw",u)}a(void 0)})}}function nt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Re(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,at(i.key),i)}}function rt(n,e,t){return e&&Re(n.prototype,e),t&&Re(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function de(n,e,t){return e=at(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Oi(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&ae(n,e)}function se(n){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},se(n)}function ae(n,e){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},ae(n,e)}function st(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function he(n,e,t){return st()?he=Reflect.construct.bind():he=function(r,s,a){var o=[null];o.push.apply(o,s);var u=Function.bind.apply(r,o),l=new u;return a&&ae(l,a.prototype),l},he.apply(null,arguments)}function Ai(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function ke(n){var e=typeof Map=="function"?new Map:void 0;return ke=function(i){if(i===null||!Ai(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return he(i,arguments,se(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ae(r,i)},ke(n)}function fe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ni(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fe(n)}function Hi(n){var e=st();return function(){var i=se(n),r;if(e){var s=se(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Ni(this,r)}}function Bi(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function at(n){var e=Bi(n,"string");return typeof e=="symbol"?e:String(e)}var ot=typeof global<"u"&&{}.toString.call(global)==="[object global]";function De(n,e){return n.indexOf(e.toLowerCase())===0?n:"".concat(e.toLowerCase()).concat(n.substr(0,1).toUpperCase()).concat(n.substr(1))}function qi(n){return!!(n&&n.nodeType===1&&"nodeName"in n&&n.ownerDocument&&n.ownerDocument.defaultView)}function Fi(n){return!isNaN(parseFloat(n))&&isFinite(n)&&Math.floor(n)==n}function J(n){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(n)}function lt(n){var e=/^https:\/\/player\.vimeo\.com\/video\/\d+/;return e.test(n)}function ut(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.id,t=n.url,i=e||t;if(!i)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(Fi(i))return"https://vimeo.com/".concat(i);if(J(i))return i.replace("http:","https:");throw e?new TypeError("“".concat(e,"” is not a valid video id.")):new TypeError("“".concat(i,"” is not a vimeo.com url."))}var Ue=function(e,t,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"addEventListener",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"removeEventListener",a=typeof t=="string"?[t]:t;return a.forEach(function(o){e[r](o,i)}),{cancel:function(){return a.forEach(function(u){return e[s](u,i)})}}},Ri=typeof Array.prototype.indexOf<"u",Di=typeof window<"u"&&typeof window.postMessage<"u";if(!ot&&(!Ri||!Di))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ui(n,e){return e={exports:{}},n(e,e.exports),e.exports}/*!
 * weakmap-polyfill v2.0.4 - ECMAScript6 WeakMap polyfill
 * https://github.com/polygonplanet/weakmap-polyfill
 * Copyright (c) 2015-2021 polygonplanet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */(function(n){if(n.WeakMap)return;var e=Object.prototype.hasOwnProperty,t=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch{}}(),i=function(s,a,o){t?Object.defineProperty(s,a,{configurable:!0,writable:!0,value:o}):s[a]=o};n.WeakMap=function(){function s(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(i(this,"_id",o("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}i(s.prototype,"delete",function(l){if(a(this,"delete"),!r(l))return!1;var m=l[this._id];return m&&m[0]===l?(delete l[this._id],!0):!1}),i(s.prototype,"get",function(l){if(a(this,"get"),!!r(l)){var m=l[this._id];if(m&&m[0]===l)return m[1]}}),i(s.prototype,"has",function(l){if(a(this,"has"),!r(l))return!1;var m=l[this._id];return!!(m&&m[0]===l)}),i(s.prototype,"set",function(l,m){if(a(this,"set"),!r(l))throw new TypeError("Invalid value used as weak map key");var d=l[this._id];return d&&d[0]===l?(d[1]=m,this):(i(l,this._id,[l,m]),this)});function a(l,m){if(!r(l)||!e.call(l,"_id"))throw new TypeError(m+" method called on incompatible receiver "+typeof l)}function o(l){return l+"_"+u()+"."+u()}function u(){return Math.random().toString().substring(2)}return i(s,"_polyfill",!0),s}();function r(s){return Object(s)===s}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ee);var j=Ui(function(n){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(t,i,r){i[t]=i[t]||r(),n.exports&&(n.exports=i[t])})("Promise",ee,function(){var t,i,r,s=Object.prototype.toString,a=typeof setImmediate<"u"?function(v){return setImmediate(v)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(v,g,E,k){return Object.defineProperty(v,g,{value:E,writable:!0,configurable:k!==!1})}}catch{t=function(g,E,k){return g[E]=k,g}}r=function(){var v,g,E;function k(M,S){this.fn=M,this.self=S,this.next=void 0}return{add:function(S,R){E=new k(S,R),g?g.next=E:v=E,g=E,E=void 0},drain:function(){var S=v;for(v=g=i=void 0;S;)S.fn.call(S.self),S=S.next}}}();function o(y,v){r.add(y,v),i||(i=a(r.drain))}function u(y){var v,g=typeof y;return y!=null&&(g=="object"||g=="function")&&(v=y.then),typeof v=="function"?v:!1}function l(){for(var y=0;y<this.chain.length;y++)m(this,this.state===1?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function m(y,v,g){var E,k;try{v===!1?g.reject(y.msg):(v===!0?E=y.msg:E=v.call(void 0,y.msg),E===g.promise?g.reject(TypeError("Promise-chain cycle")):(k=u(E))?k.call(E,g.resolve,g.reject):g.resolve(E))}catch(M){g.reject(M)}}function d(y){var v,g=this;if(!g.triggered){g.triggered=!0,g.def&&(g=g.def);try{(v=u(y))?o(function(){var E=new b(g);try{v.call(y,function(){d.apply(E,arguments)},function(){f.apply(E,arguments)})}catch(k){f.call(E,k)}}):(g.msg=y,g.state=1,g.chain.length>0&&o(l,g))}catch(E){f.call(new b(g),E)}}}function f(y){var v=this;v.triggered||(v.triggered=!0,v.def&&(v=v.def),v.msg=y,v.state=2,v.chain.length>0&&o(l,v))}function _(y,v,g,E){for(var k=0;k<v.length;k++)(function(S){y.resolve(v[S]).then(function(V){g(S,V)},E)})(k)}function b(y){this.def=y,this.triggered=!1}function T(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function L(y){if(typeof y!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var v=new T(this);this.then=function(E,k){var M={success:typeof E=="function"?E:!0,failure:typeof k=="function"?k:!1};return M.promise=new this.constructor(function(R,V){if(typeof R!="function"||typeof V!="function")throw TypeError("Not a function");M.resolve=R,M.reject=V}),v.chain.push(M),v.state!==0&&o(l,v),M.promise},this.catch=function(E){return this.then(void 0,E)};try{y.call(void 0,function(E){d.call(v,E)},function(E){f.call(v,E)})}catch(g){f.call(v,g)}}var P=t({},"constructor",L,!1);return L.prototype=P,t(P,"__NPO__",0,!1),t(L,"resolve",function(v){var g=this;return v&&typeof v=="object"&&v.__NPO__===1?v:new g(function(k,M){if(typeof k!="function"||typeof M!="function")throw TypeError("Not a function");k(v)})}),t(L,"reject",function(v){return new this(function(E,k){if(typeof E!="function"||typeof k!="function")throw TypeError("Not a function");k(v)})}),t(L,"all",function(v){var g=this;return s.call(v)!="[object Array]"?g.reject(TypeError("Not an array")):v.length===0?g.resolve([]):new g(function(k,M){if(typeof k!="function"||typeof M!="function")throw TypeError("Not a function");var S=v.length,R=Array(S),V=0;_(g,v,function(h,c){R[h]=c,++V===S&&k(R)},M)})}),t(L,"race",function(v){var g=this;return s.call(v)!="[object Array]"?g.reject(TypeError("Not an array")):new g(function(k,M){if(typeof k!="function"||typeof M!="function")throw TypeError("Not a function");_(g,v,function(R,V){k(V)},M)})}),L})}),Y=new WeakMap;function ie(n,e,t){var i=Y.get(n.element)||{};e in i||(i[e]=[]),i[e].push(t),Y.set(n.element,i)}function me(n,e){var t=Y.get(n.element)||{};return t[e]||[]}function ve(n,e,t){var i=Y.get(n.element)||{};if(!i[e])return!0;if(!t)return i[e]=[],Y.set(n.element,i),!0;var r=i[e].indexOf(t);return r!==-1&&i[e].splice(r,1),Y.set(n.element,i),i[e]&&i[e].length===0}function Vi(n,e){var t=me(n,e);if(t.length<1)return!1;var i=t.shift();return ve(n,e,i),i}function ji(n,e){var t=Y.get(n);Y.set(e,t),Y.delete(n)}function be(n){if(typeof n=="string")try{n=JSON.parse(n)}catch(e){return console.warn(e),{}}return n}function K(n,e,t){if(!(!n.element.contentWindow||!n.element.contentWindow.postMessage)){var i={method:e};t!==void 0&&(i.value=t);var r=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));r>=8&&r<10&&(i=JSON.stringify(i)),n.element.contentWindow.postMessage(i,n.origin)}}function $i(n,e){e=be(e);var t=[],i;if(e.event){if(e.event==="error"){var r=me(n,e.data.method);r.forEach(function(a){var o=new Error(e.data.message);o.name=e.data.name,a.reject(o),ve(n,e.data.method,a)})}t=me(n,"event:".concat(e.event)),i=e.data}else if(e.method){var s=Vi(n,e.method);s&&(t.push(s),i=e.value)}t.forEach(function(a){try{if(typeof a=="function"){a.call(n,i);return}a.resolve(i)}catch{}})}var Wi=["autopause","autoplay","background","byline","color","colors","controls","dnt","height","id","interactive_params","keyboard","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function ct(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wi.reduce(function(t,i){var r=n.getAttribute("data-vimeo-".concat(i));return(r||r==="")&&(t[i]=r===""?1:r),t},e)}function Te(n,e){var t=n.html;if(!e)throw new TypeError("An element must be provided");if(e.getAttribute("data-vimeo-initialized")!==null)return e.querySelector("iframe");var i=document.createElement("div");return i.innerHTML=t,e.appendChild(i.firstChild),e.setAttribute("data-vimeo-initialized","true"),e.querySelector("iframe")}function dt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;return new Promise(function(i,r){if(!J(n))throw new TypeError("“".concat(n,"” is not a vimeo.com url."));var s="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(n));for(var a in e)e.hasOwnProperty(a)&&(s+="&".concat(a,"=").concat(encodeURIComponent(e[a])));var o="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;o.open("GET",s,!0),o.onload=function(){if(o.status===404){r(new Error("“".concat(n,"” was not found.")));return}if(o.status===403){r(new Error("“".concat(n,"” is not embeddable.")));return}try{var u=JSON.parse(o.responseText);if(u.domain_status_code===403){Te(u,t),r(new Error("“".concat(n,"” is not embeddable.")));return}i(u)}catch(l){r(l)}},o.onerror=function(){var u=o.status?" (".concat(o.status,")"):"";r(new Error("There was an error fetching the embed code from Vimeo".concat(u,".")))},o.send()})}function zi(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,e=[].slice.call(n.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),t=function(r){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(r))};e.forEach(function(i){try{if(i.getAttribute("data-vimeo-defer")!==null)return;var r=ct(i),s=ut(r);dt(s,r,i).then(function(a){return Te(a,i)}).catch(t)}catch(a){t(a)}})}function Yi(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var e=function(i){if(J(i.origin)&&!(!i.data||i.data.event!=="spacechange")){for(var r=n.querySelectorAll("iframe"),s=0;s<r.length;s++)if(r[s].contentWindow===i.source){var a=r[s].parentElement;a.style.paddingBottom="".concat(i.data.data[0].bottom,"px");break}}};window.addEventListener("message",e)}}function Qi(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoSeoMetadataAppended){window.VimeoSeoMetadataAppended=!0;var e=function(i){if(J(i.origin)){var r=be(i.data);if(!(!r||r.event!=="ready"))for(var s=n.querySelectorAll("iframe"),a=0;a<s.length;a++){var o=s[a],u=o.contentWindow===i.source;if(lt(o.src)&&u){var l=new Pe(o);l.callMethod("appendVideoMetadata",window.location.href)}}}};window.addEventListener("message",e)}}function Ki(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoCheckedUrlTimeParam){window.VimeoCheckedUrlTimeParam=!0;var e=function(r){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(r))},t=function(r){if(J(r.origin)){var s=be(r.data);if(!(!s||s.event!=="ready"))for(var a=n.querySelectorAll("iframe"),o=function(){var m=a[u],d=m.contentWindow===r.source;if(lt(m.src)&&d){var f=new Pe(m);f.getVideoId().then(function(_){var b=new RegExp("[?&]vimeo_t_".concat(_,"=([^&#]*)")).exec(window.location.href);if(b&&b[1]){var T=decodeURI(b[1]);f.setCurrentTime(T)}}).catch(e)}},u=0;u<a.length;u++)o()}};window.addEventListener("message",t)}}function Xi(){var n=function(){for(var i,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=0,a=r.length,o={};s<a;s++)if(i=r[s],i&&i[1]in document){for(s=0;s<i.length;s++)o[r[0][s]]=i[s];return o}return!1}(),e={fullscreenchange:n.fullscreenchange,fullscreenerror:n.fullscreenerror},t={request:function(r){return new Promise(function(s,a){var o=function l(){t.off("fullscreenchange",l),s()};t.on("fullscreenchange",o),r=r||document.documentElement;var u=r[n.requestFullscreen]();u instanceof Promise&&u.then(o).catch(a)})},exit:function(){return new Promise(function(r,s){if(!t.isFullscreen){r();return}var a=function u(){t.off("fullscreenchange",u),r()};t.on("fullscreenchange",a);var o=document[n.exitFullscreen]();o instanceof Promise&&o.then(a).catch(s)})},on:function(r,s){var a=e[r];a&&document.addEventListener(a,s)},off:function(r,s){var a=e[r];a&&document.removeEventListener(a,s)}};return Object.defineProperties(t,{isFullscreen:{get:function(){return!!document[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!document[n.fullscreenEnabled]}}}),t}var Ji={role:"viewer",autoPlayMuted:!0,allowedDrift:.3,maxAllowedDrift:1,minCheckInterval:.1,maxRateAdjustment:.2,maxTimeToCatchUp:1},Zi=function(n){Oi(t,n);var e=Hi(t);function t(i,r){var s,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return nt(this,t),s=e.call(this),de(fe(s),"logger",void 0),de(fe(s),"speedAdjustment",0),de(fe(s),"adjustSpeed",function(){var u=X(H().mark(function l(m,d){var f;return H().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(s.speedAdjustment!==d){b.next=2;break}return b.abrupt("return");case 2:return b.next=4,m.getPlaybackRate();case 4:return b.t0=b.sent,b.t1=s.speedAdjustment,b.t2=b.t0-b.t1,b.t3=d,f=b.t2+b.t3,s.log("New playbackRate:  ".concat(f)),b.next=12,m.setPlaybackRate(f);case 12:s.speedAdjustment=d;case 13:case"end":return b.stop()}},l)}));return function(l,m){return u.apply(this,arguments)}}()),s.logger=o,s.init(r,i,qe(qe({},Ji),a)),s}return rt(t,[{key:"disconnect",value:function(){this.dispatchEvent(new Event("disconnect"))}},{key:"init",value:function(){var i=X(H().mark(function s(a,o,u){var l=this,m,d,f;return H().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,this.waitForTOReadyState(a,"open");case 2:if(u.role!=="viewer"){b.next=10;break}return b.next=5,this.updatePlayer(a,o,u);case 5:m=Ue(a,"change",function(){return l.updatePlayer(a,o,u)}),d=this.maintainPlaybackPosition(a,o,u),this.addEventListener("disconnect",function(){d.cancel(),m.cancel()}),b.next=14;break;case 10:return b.next=12,this.updateTimingObject(a,o);case 12:f=Ue(o,["seeked","play","pause","ratechange"],function(){return l.updateTimingObject(a,o)},"on","off"),this.addEventListener("disconnect",function(){return f.cancel()});case 14:case"end":return b.stop()}},s,this)}));function r(s,a,o){return i.apply(this,arguments)}return r}()},{key:"updateTimingObject",value:function(){var i=X(H().mark(function s(a,o){return H().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=a,l.next=3,o.getCurrentTime();case 3:return l.t1=l.sent,l.next=6,o.getPaused();case 6:if(!l.sent){l.next=10;break}l.t2=0,l.next=13;break;case 10:return l.next=12,o.getPlaybackRate();case 12:l.t2=l.sent;case 13:l.t3=l.t2,l.t4={position:l.t1,velocity:l.t3},l.t0.update.call(l.t0,l.t4);case 16:case"end":return l.stop()}},s)}));function r(s,a){return i.apply(this,arguments)}return r}()},{key:"updatePlayer",value:function(){var i=X(H().mark(function s(a,o,u){var l,m,d;return H().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(l=a.query(),m=l.position,d=l.velocity,typeof m=="number"&&o.setCurrentTime(m),typeof d!="number"){_.next=25;break}if(d!==0){_.next=11;break}return _.next=6,o.getPaused();case 6:if(_.t0=_.sent,_.t0!==!1){_.next=9;break}o.pause();case 9:_.next=25;break;case 11:if(!(d>0)){_.next=25;break}return _.next=14,o.getPaused();case 14:if(_.t1=_.sent,_.t1!==!0){_.next=19;break}return _.next=18,o.play().catch(function(){var b=X(H().mark(function T(L){return H().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(L.name==="NotAllowedError"&&u.autoPlayMuted)){y.next=5;break}return y.next=3,o.setMuted(!0);case 3:return y.next=5,o.play().catch(function(v){return console.error("Couldn't play the video from TimingSrcConnector. Error:",v)});case 5:case"end":return y.stop()}},T)}));return function(T){return b.apply(this,arguments)}}());case 18:this.updatePlayer(a,o,u);case 19:return _.next=21,o.getPlaybackRate();case 21:if(_.t2=_.sent,_.t3=d,_.t2===_.t3){_.next=25;break}o.setPlaybackRate(d);case 25:case"end":return _.stop()}},s,this)}));function r(s,a,o){return i.apply(this,arguments)}return r}()},{key:"maintainPlaybackPosition",value:function(r,s,a){var o=this,u=a.allowedDrift,l=a.maxAllowedDrift,m=a.minCheckInterval,d=a.maxRateAdjustment,f=a.maxTimeToCatchUp,_=Math.min(f,Math.max(m,l))*1e3,b=function(){var L=X(H().mark(function P(){var y,v,g,E,k;return H().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(S.t0=r.query().velocity===0,S.t0){S.next=6;break}return S.next=4,s.getPaused();case 4:S.t1=S.sent,S.t0=S.t1===!0;case 6:if(!S.t0){S.next=8;break}return S.abrupt("return");case 8:return S.t2=r.query().position,S.next=11,s.getCurrentTime();case 11:if(S.t3=S.sent,y=S.t2-S.t3,v=Math.abs(y),o.log("Drift: ".concat(y)),!(v>l)){S.next=22;break}return S.next=18,o.adjustSpeed(s,0);case 18:s.setCurrentTime(r.query().position),o.log("Resync by currentTime"),S.next=29;break;case 22:if(!(v>u)){S.next=29;break}return g=v/f,E=d,k=g<E?(E-g)/2:E,S.next=28,o.adjustSpeed(s,k*Math.sign(y));case 28:o.log("Resync by playbackRate");case 29:case"end":return S.stop()}},P)}));return function(){return L.apply(this,arguments)}}(),T=setInterval(function(){return b()},_);return{cancel:function(){return clearInterval(T)}}}},{key:"log",value:function(r){var s;(s=this.logger)===null||s===void 0||s.call(this,"TimingSrcConnector: ".concat(r))}},{key:"waitForTOReadyState",value:function(r,s){return new Promise(function(a){var o=function u(){r.readyState===s?a():r.addEventListener("readystatechange",u,{once:!0})};o()})}}]),t}(ke(EventTarget)),G=new WeakMap,we=new WeakMap,q={},Pe=function(){function n(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(nt(this,n),window.jQuery&&e instanceof jQuery&&(e.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),e=e[0]),typeof document<"u"&&typeof e=="string"&&(e=document.getElementById(e)),!qi(e))throw new TypeError("You must pass either a valid element or a valid id.");if(e.nodeName!=="IFRAME"){var r=e.querySelector("iframe");r&&(e=r)}if(e.nodeName==="IFRAME"&&!J(e.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(G.has(e))return G.get(e);this._window=e.ownerDocument.defaultView,this.element=e,this.origin="*";var s=new j(function(o,u){if(t._onMessage=function(d){if(!(!J(d.origin)||t.element.contentWindow!==d.source)){t.origin==="*"&&(t.origin=d.origin);var f=be(d.data),_=f&&f.event==="error",b=_&&f.data&&f.data.method==="ready";if(b){var T=new Error(f.data.message);T.name=f.data.name,u(T);return}var L=f&&f.event==="ready",P=f&&f.method==="ping";if(L||P){t.element.setAttribute("data-ready","true"),o();return}$i(t,f)}},t._window.addEventListener("message",t._onMessage),t.element.nodeName!=="IFRAME"){var l=ct(e,i),m=ut(l);dt(m,l,e).then(function(d){var f=Te(d,e);return t.element=f,t._originalElement=e,ji(e,f),G.set(t.element,t),d}).catch(u)}});if(we.set(this,s),G.set(this.element,this),this.element.nodeName==="IFRAME"&&K(this,"ping"),q.isEnabled){var a=function(){return q.exit()};this.fullscreenchangeHandler=function(){q.isFullscreen?ie(t,"event:exitFullscreen",a):ve(t,"event:exitFullscreen",a),t.ready().then(function(){K(t,"fullscreenchange",q.isFullscreen)})},q.on("fullscreenchange",this.fullscreenchangeHandler)}return this}return rt(n,[{key:"callMethod",value:function(t){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new j(function(s,a){return i.ready().then(function(){ie(i,t,{resolve:s,reject:a}),K(i,t,r)}).catch(a)})}},{key:"get",value:function(t){var i=this;return new j(function(r,s){return t=De(t,"get"),i.ready().then(function(){ie(i,t,{resolve:r,reject:s}),K(i,t)}).catch(s)})}},{key:"set",value:function(t,i){var r=this;return new j(function(s,a){if(t=De(t,"set"),i==null)throw new TypeError("There must be a value to set.");return r.ready().then(function(){ie(r,t,{resolve:s,reject:a}),K(r,t,i)}).catch(a)})}},{key:"on",value:function(t,i){if(!t)throw new TypeError("You must pass an event name.");if(!i)throw new TypeError("You must pass a callback function.");if(typeof i!="function")throw new TypeError("The callback must be a function.");var r=me(this,"event:".concat(t));r.length===0&&this.callMethod("addEventListener",t).catch(function(){}),ie(this,"event:".concat(t),i)}},{key:"off",value:function(t,i){if(!t)throw new TypeError("You must pass an event name.");if(i&&typeof i!="function")throw new TypeError("The callback must be a function.");var r=ve(this,"event:".concat(t),i);r&&this.callMethod("removeEventListener",t).catch(function(s){})}},{key:"loadVideo",value:function(t){return this.callMethod("loadVideo",t)}},{key:"ready",value:function(){var t=we.get(this)||new j(function(i,r){r(new Error("Unknown player. Probably unloaded."))});return j.resolve(t)}},{key:"addCuePoint",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:t,data:i})}},{key:"removeCuePoint",value:function(t){return this.callMethod("removeCuePoint",t)}},{key:"enableTextTrack",value:function(t,i){if(!t)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:t,kind:i})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return q.isEnabled?q.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return q.isEnabled?q.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return q.isEnabled?j.resolve(q.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"remotePlaybackPrompt",value:function(){return this.callMethod("remotePlaybackPrompt")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var t=this;return new j(function(i){if(we.delete(t),G.delete(t.element),t._originalElement&&(G.delete(t._originalElement),t._originalElement.removeAttribute("data-vimeo-initialized")),t.element&&t.element.nodeName==="IFRAME"&&t.element.parentNode&&(t.element.parentNode.parentNode&&t._originalElement&&t._originalElement!==t.element.parentNode?t.element.parentNode.parentNode.removeChild(t.element.parentNode):t.element.parentNode.removeChild(t.element)),t.element&&t.element.nodeName==="DIV"&&t.element.parentNode){t.element.removeAttribute("data-vimeo-initialized");var r=t.element.querySelector("iframe");r&&r.parentNode&&(r.parentNode.parentNode&&t._originalElement&&t._originalElement!==r.parentNode?r.parentNode.parentNode.removeChild(r.parentNode):r.parentNode.removeChild(r))}t._window.removeEventListener("message",t._onMessage),q.isEnabled&&q.off("fullscreenchange",t.fullscreenchangeHandler),i()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(t){return this.set("autopause",t)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(t){return this.set("cameraProps",t)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"getColors",value:function(){return j.all([this.get("colorOne"),this.get("colorTwo"),this.get("colorThree"),this.get("colorFour")])}},{key:"setColor",value:function(t){return this.set("color",t)}},{key:"setColors",value:function(t){if(!Array.isArray(t))return new j(function(s,a){return a(new TypeError("Argument must be an array."))});var i=new j(function(s){return s(null)}),r=[t[0]?this.set("colorOne",t[0]):i,t[1]?this.set("colorTwo",t[1]):i,t[2]?this.set("colorThree",t[2]):i,t[3]?this.set("colorFour",t[3]):i];return j.all(r)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(t){return this.set("currentTime",t)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(t){return this.set("loop",t)}},{key:"setMuted",value:function(t){return this.set("muted",t)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(t){return this.set("playbackRate",t)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(t){return this.set("quality",t)}},{key:"getRemotePlaybackAvailability",value:function(){return this.get("remotePlaybackAvailability")}},{key:"getRemotePlaybackState",value:function(){return this.get("remotePlaybackState")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(t){return this.set("volume",t)}},{key:"setTimingSrc",value:function(){var e=X(H().mark(function i(r,s){var a=this,o;return H().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(r){l.next=2;break}throw new TypeError("A Timing Object must be provided.");case 2:return l.next=4,this.ready();case 4:return o=new Zi(this,r,s),K(this,"notifyTimingObjectConnect"),o.addEventListener("disconnect",function(){return K(a,"notifyTimingObjectDisconnect")}),l.abrupt("return",o);case 8:case"end":return l.stop()}},i,this)}));function t(i,r){return e.apply(this,arguments)}return t}()}]),n}();ot||(q=Xi(),zi(),Yi(),Qi(),Ki());class Gi extends I{static get is(){return"exceed-external-video-tracker"}static get properties(){return{doTrack:{type:Boolean,value:!1},enrollmentTargetUrl:{type:String,value:""},enrollmentId:{type:String,value:""},completionTargetUrl:{type:String,value:"/student/video_activity_completions"},videoProgressUrl:{type:String,value:"enrollment_video_statuses/update/"},vimeoPlayerSelector:{type:String,value:"vimeo"},youtubePlayerSelector:{type:String,value:"youtube"},facebookPlayerSelector:{type:String,value:"facebook"}}}triggerUserEnrollmentRequest(){!this.enrollmentId&&this.enrollmentTargetUrl&&W.post(this.enrollmentTargetUrl,{}).then(e=>{this.enrollmentId=e.data.enrollment.id})}triggerUserCompletionRequest(e,t){this.enrollmentId&&W.post(this.completionTargetUrl,{enrollment_id:this.enrollmentId,time_watched:e}).then(i=>{t()})}triggerVideoProgressUpdate(e,t){this._enrollmentVideoStatusId&&W.post(this.videoProgressUrl,{id:this._enrollmentVideoStatusId,current_time:e,is_video_finished:t}).then(i=>{})}trackVimeoVideo(){this._player=new Pe(this._externalVideoObject);var e=()=>{this._player.off("progress")};e.bind(this),this._player.on("bufferstart",()=>{this.triggerUserEnrollmentRequest(),this._player.off("bufferstart")}),this._player.on("progress",t=>{var i=t.duration,r=t.seconds,s=i-r,a=30;i<=60&&(a=6),a>0&&s<a&&this.triggerUserCompletionRequest(r,e)})}trackYoutubeVideoByType(){var e=this,t=e.querySelector("[data-video-provider]").dataset.liveBroadcastType;t=="live",e.trackYoutubeLiveVideo(t)}trackYoutubeVideo(){this.initializeYoutubePlayer();var e=this;F.subscribe(B.youtube_loaded,function(){var t=null,i=function(){clearInterval(t)};e._player=new YT.Player(e._externalVideoObject.id,{events:{onStateChange:function(r){r.data==YT.PlayerState.BUFFERING&&!e.enrollmentId&&e.triggerUserEnrollmentRequest()},onReady:function(){t=setInterval(function(){var r=e._player.getDuration(),s=e._player.getCurrentTime(),a=r-s,o=30;r<=60&&(o=6),o>0&&a<o&&e.triggerUserCompletionRequest(s,i)},3e3)}}})})}trackYoutubeLiveVideo(e){this.initializeYoutubePlayer();var t=this;F.subscribe(B.youtube_loaded,function(){var i=null,r=function(){clearInterval(i)};t._player=new YT.Player(t._externalVideoObject.id,{events:{onStateChange:function(s){var a=t._player.getCurrentTime(),o=!1;if(s.data==YT.PlayerState.BUFFERING&&!t.enrollmentId&&t.triggerUserEnrollmentRequest(),s.data==YT.PlayerState.PLAYING&&(t.triggerVideoProgressUpdate(a,o),i=setInterval(function(){t.triggerVideoProgressUpdate(a,o)},15e3)),s.data==YT.PlayerState.PAUSED&&(t.triggerVideoProgressUpdate(a,o),clearInterval(i)),s.data==YT.PlayerState.ENDED){var o=!0;t.triggerVideoProgressUpdate(a,o),t.triggerUserCompletionRequest(a,r)}}}})})}trackFacebookVideo(){var e=this;document.addEventListener("init.fbvideoplayer",function(t){e._player=t.detail;var i=null,r,s=function(){clearInterval(i)};r=e._player.subscribe("startedPlaying",function(a){r.release("startedPlaying"),e.triggerUserEnrollmentRequest(),i=setInterval(function(){var o=e._player.getDuration(),u=e._player.getCurrentPosition(),l=o-u,m=30;o<=60&&(m=6),m>0&&l<m&&e.triggerUserCompletionRequest(u,s)},3e3)})})}initializeYoutubePlayer(){const e="https://www.youtube.com/iframe_api";if(document.querySelectorAll(`script[src="${e}"]`).length==0){var t=document.createElement("script");t.src=e;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),window.onYouTubeIframeAPIReady=function(){F.publish(B.youtube_loaded)}}}init(){this.doTrack&&(this._externalVideoObject=this.querySelector("[data-video-provider]"),this._videoProvider=this._externalVideoObject.dataset.videoProvider,this._videoProvider=="vimeo"?this.trackVimeoVideo():this._videoProvider=="youtube"?this.trackYoutubeVideoByType():this._videoProvider=="facebook"&&this.trackFacebookVideo(),this._enrollmentVideoStatusId=this.querySelector("[data-video-provider]").dataset.videoControl)}connectedCallback(){super.connectedCallback(),this.init()}}customElements.define("exceed-external-video-tracker",Gi);
//# sourceMappingURL=components-fb64a84c.js.map
